:root {
  /* Neutral palette derived from Tailwind slate scale */
  --color-surface: #f8fafc;
  --color-card: #f1f5f9;
  --color-heading: #0f172a;
  --color-body: #1e293b;
  --color-secondary: #334155;
  --color-muted: #64748b;
  --color-muted-soft: #94a3b8;
  --color-muted-faint: #cbd5f5;
  --color-border: #cbd5f5;
  --color-border-subtle: #e2e8f0;
  --color-subtle-bg: #e7edf5;
  --color-link: hsl(226, 55%, 45%);
  --color-link-hover: hsl(226, 58.6%, 51.3%);

  --accent-strong: var(--color-link);
  --accent-strong-hover: var(--color-link-hover);
  --accent-text: var(--color-link);
  --accent-soft: var(--color-subtle-bg);
  --accent-border: var(--color-border-subtle);

  /* Tone tokens (light) */
  --tone-indigo-soft: var(--color-path-foundations-soft);
  --tone-indigo-border: var(--color-path-foundations-border);
  --tone-indigo-text: var(--color-path-foundations-text);
  --tone-indigo-strong: var(--color-path-foundations-strong);

  --tone-sky-soft: var(--color-path-training-soft);
  --tone-sky-border: var(--color-path-training-border);
  --tone-sky-text: var(--color-path-training-text);
  --tone-sky-strong: var(--color-path-training-strong);

  --tone-emerald-soft: hsl(139, 55.2%, 94.5%);
  --tone-emerald-border: hsl(141, 43.7%, 86.0%);
  --tone-emerald-text: hsl(153, 67.0%, 28.5%);
  --tone-emerald-strong: hsl(151, 55.0%, 41.5%);

  --tone-amber-soft: hsl(44, 100%, 91.7%);
  --tone-amber-border: hsl(42, 100%, 81.8%);
  --tone-amber-text: hsl(30, 100%, 34.0%);
  --tone-amber-strong: hsl(39, 100%, 57.0%);

  --tone-rose-soft: var(--color-path-scaling-soft);
  --tone-rose-border: var(--color-path-scaling-border);
  --tone-rose-text: var(--color-path-scaling-text);
  --tone-rose-strong: var(--color-path-scaling-strong);

  --tone-purple-soft: var(--color-path-generation-soft);
  --tone-purple-border: var(--color-path-generation-border);
  --tone-purple-text: var(--color-path-generation-text);
  --tone-purple-strong: var(--color-path-generation-strong);

  /* Path accent palette */
  --color-path-foundations-strong: #6366f1;
  --color-path-foundations-strong-hover: #4f46e5;
  --color-path-foundations-text: #4338ca;
  --color-path-foundations-soft: #eef2ff;
  --color-path-foundations-border: #c7d2fe;

  --color-path-generation-strong: #a855f7;
  --color-path-generation-strong-hover: #9333ea;
  --color-path-generation-text: #7c3aed;
  --color-path-generation-soft: #f3e8ff;
  --color-path-generation-border: #e9d5ff;

  --color-path-training-strong: #0ea5e9;
  --color-path-training-strong-hover: #0284c7;
  --color-path-training-text: #0369a1;
  --color-path-training-soft: #e0f2fe;
  --color-path-training-border: #bae6fd;

  --color-path-scaling-strong: #f43f5e;
  --color-path-scaling-strong-hover: #e11d48;
  --color-path-scaling-text: #be123c;
  --color-path-scaling-soft: #ffe4e6;
  --color-path-scaling-border: #fecdd3;

  --color-path-alignment-strong: #14b8a6;
  --color-path-alignment-strong-hover: #0d9488;
  --color-path-alignment-text: #0f766e;
  --color-path-alignment-soft: #d1fae5;
  --color-path-alignment-border: #99f6e4;

  /* Swatch tokens for utility shades */
  --swatch-indigo-50: color-mix(in srgb, var(--tone-indigo-strong) 6%, var(--color-card) 94%);
  --swatch-indigo-100: color-mix(in srgb, var(--tone-indigo-strong) 12%, var(--color-card) 88%);
  --swatch-blue-50: color-mix(in srgb, var(--tone-sky-strong) 6%, var(--color-card) 94%);
  --swatch-blue-100: color-mix(in srgb, var(--tone-sky-strong) 12%, var(--color-card) 88%);
  --swatch-sky-50: color-mix(in srgb, var(--tone-sky-strong) 8%, var(--color-card) 92%);
  --swatch-green-50: color-mix(in srgb, var(--tone-emerald-strong) 6%, var(--color-card) 94%);
  --swatch-green-100: color-mix(in srgb, var(--tone-emerald-strong) 12%, var(--color-card) 88%);
  --swatch-emerald-50: var(--swatch-green-50);
  --swatch-emerald-100: var(--swatch-green-100);
  --swatch-purple-50: color-mix(in srgb, var(--tone-purple-strong) 6%, var(--color-card) 94%);
  --swatch-purple-100: color-mix(in srgb, var(--tone-purple-strong) 12%, var(--color-card) 88%);
  --swatch-orange-50: color-mix(in srgb, var(--tone-amber-strong) 8%, var(--color-card) 92%);
  --swatch-orange-100: color-mix(in srgb, var(--tone-amber-strong) 16%, var(--color-card) 84%);
  --swatch-amber-50: color-mix(in srgb, var(--tone-amber-strong) 6%, var(--color-card) 94%);
  --swatch-yellow-50: color-mix(in srgb, var(--tone-amber-strong) 5%, var(--color-card) 95%);
  --swatch-cyan-50: color-mix(in srgb, #06b6d4 8%, var(--color-card) 92%);
  --swatch-cyan-100: color-mix(in srgb, #06b6d4 16%, var(--color-card) 84%);
  --swatch-teal-50: color-mix(in srgb, #14b8a6 8%, var(--color-card) 92%);
  --swatch-teal-100: color-mix(in srgb, #14b8a6 16%, var(--color-card) 84%);
  --swatch-rose-50: color-mix(in srgb, var(--color-path-scaling-strong) 8%, var(--color-card) 92%);
  --swatch-pink-50: color-mix(in srgb, #ec4899 8%, var(--color-card) 92%);
  --swatch-red-50: color-mix(in srgb, #ef4444 8%, var(--color-card) 92%);
  --swatch-slate-50: color-mix(in srgb, #64748b 6%, var(--color-card) 94%);
  --swatch-gray-50: color-mix(in srgb, var(--color-border-subtle) 10%, var(--color-card) 90%);

  /* Semantic panel tokens (light) */
  --panel-info-bg: #eef2ff;
  --panel-info-border: #c7d2fe;
  --panel-info-border-strong: #6366f1;
  --panel-info-heading: #312e81;
  --panel-info-text: #1d4ed8;
  --panel-info-muted: #475569;
  --panel-info-strong: #4338ca;
  --panel-info-link-hover: #312e81;

  --panel-success-bg: #ecfdf5;
  --panel-success-border: #a7f3d0;
  --panel-success-border-strong: #22c55e;
  --panel-success-heading: #065f46;
  --panel-success-text: #047857;
  --panel-success-muted: #0f766e;
  --panel-success-strong: #047857;
  --panel-success-link-hover: #064e3b;

  --panel-warning-bg: #fef3c7;
  --panel-warning-border: #fcd34d;
  --panel-warning-border-strong: #f59e0b;
  --panel-warning-heading: #92400e;
  --panel-warning-text: #b45309;
  --panel-warning-muted: #b45309;
  --panel-warning-strong: #92400e;
  --panel-warning-link-hover: #7c2d12;

  --panel-accent-bg: #fdf4ff;
  --panel-accent-border: #e9d5ff;
  --panel-accent-border-strong: #a855f7;
  --panel-accent-heading: #6b21a8;
  --panel-accent-text: #7c3aed;
  --panel-accent-muted: #6b7280;
  --panel-accent-strong: #7e22ce;
  --panel-accent-link-hover: #581c87;

  --panel-neutral-bg: #f1f5f9;
  --panel-neutral-border: #e2e8f0;
  --panel-neutral-border-strong: #94a3b8;
  --panel-neutral-heading: #0f172a;
  --panel-neutral-text: #1f2937;
  --panel-neutral-muted: #475569;
  --panel-neutral-strong: #1f2937;
  --panel-neutral-link-hover: #0f172a;

  /* Chip tokens (light) */
  --chip-info-bg: #e0e7ff;
  --chip-info-border: #c7d2fe;
  --chip-info-text: #312e81;

  --chip-success-bg: #d1fae5;
  --chip-success-border: #6ee7b7;
  --chip-success-text: #065f46;

  --chip-warning-bg: #fef3c7;
  --chip-warning-border: #fcd34d;
  --chip-warning-text: #92400e;

  --chip-accent-bg: #f3e8ff;
  --chip-accent-border: #d8b4fe;
  --chip-accent-text: #6b21a8;

  --chip-neutral-bg: #e2e8f0;
  --chip-neutral-border: #cbd5f5;
  --chip-neutral-text: #1f2937;
}

html {
  color-scheme: light dark;
  background-color: var(--color-surface);
}

html.dark {
  --color-surface: #020617;
  --color-card: #0f172a;
  --color-heading: #f8fafc;
  --color-body: #e2e8f0;
  --color-secondary: #cbd5f5;
  --color-muted: #94a3b8;
  --color-muted-soft: #73839a;
  --color-muted-faint: #475569;
  --color-border: #1e293b;
  --color-border-subtle: #273247;
  --color-subtle-bg: #131a2c;
  --color-link: hsl(228, 100%, 75.9%);
  --color-link-hover: hsl(226, 100%, 82.0%);

  --accent-strong: var(--color-link);
  --accent-strong-hover: var(--color-link-hover);
  --accent-text: var(--color-link);
  --accent-soft: var(--color-subtle-bg);
  --accent-border: var(--color-border-subtle);

  --tone-indigo-soft: var(--color-path-foundations-soft);
  --tone-indigo-border: var(--color-path-foundations-border);
  --tone-indigo-text: var(--color-path-foundations-text);
  --tone-indigo-strong: var(--color-path-foundations-strong);

  --tone-sky-soft: var(--color-path-training-soft);
  --tone-sky-border: var(--color-path-training-border);
  --tone-sky-text: var(--color-path-training-text);
  --tone-sky-strong: var(--color-path-training-strong);

  --tone-emerald-soft: hsl(153, 51.8%, 21.8%);
  --tone-emerald-border: hsl(151, 51.7%, 28.4%);
  --tone-emerald-text: hsl(151, 50.0%, 53.2%);
  --tone-emerald-strong: hsl(151, 55.0%, 41.5%);

  --tone-amber-soft: hsl(32, 100%, 12.4%);
  --tone-amber-border: hsl(35, 91.0%, 21.6%);
  --tone-amber-text: hsl(39, 90.0%, 49.8%);
  --tone-amber-strong: hsl(39, 100%, 57.0%);

  --tone-rose-soft: var(--color-path-scaling-soft);
  --tone-rose-border: var(--color-path-scaling-border);
  --tone-rose-text: var(--color-path-scaling-text);
  --tone-rose-strong: var(--color-path-scaling-strong);

  --tone-purple-soft: var(--color-path-generation-soft);
  --tone-purple-border: var(--color-path-generation-border);
  --tone-purple-text: var(--color-path-generation-text);
  --tone-purple-strong: var(--color-path-generation-strong);

  --swatch-indigo-50: color-mix(in srgb, var(--tone-indigo-strong) 82%, #050b1b 18%);
  --swatch-indigo-100: color-mix(in srgb, var(--tone-indigo-strong) 92%, #050b1b 8%);
  --swatch-blue-50: color-mix(in srgb, var(--tone-sky-strong) 80%, #051320 20%);
  --swatch-blue-100: color-mix(in srgb, var(--tone-sky-strong) 90%, #051320 10%);
  --swatch-sky-50: color-mix(in srgb, var(--tone-sky-strong) 84%, #061529 16%);
  --swatch-green-50: color-mix(in srgb, var(--tone-emerald-strong) 78%, #041612 22%);
  --swatch-green-100: color-mix(in srgb, var(--tone-emerald-strong) 88%, #041612 12%);
  --swatch-emerald-50: var(--swatch-green-50);
  --swatch-emerald-100: var(--swatch-green-100);
  --swatch-purple-50: color-mix(in srgb, var(--tone-purple-strong) 82%, #0a0520 18%);
  --swatch-purple-100: color-mix(in srgb, var(--tone-purple-strong) 92%, #0a0520 8%);
  --swatch-orange-50: color-mix(in srgb, var(--tone-amber-strong) 82%, #1f1203 18%);
  --swatch-orange-100: color-mix(in srgb, var(--tone-amber-strong) 92%, #1f1203 8%);
  --swatch-amber-50: color-mix(in srgb, var(--tone-amber-strong) 74%, #1f1203 26%);
  --swatch-yellow-50: color-mix(in srgb, var(--tone-amber-strong) 70%, #1f1203 30%);
  --swatch-cyan-50: color-mix(in srgb, #0891b2 82%, #02131a 18%);
  --swatch-cyan-100: color-mix(in srgb, #0891b2 92%, #02131a 8%);
  --swatch-teal-50: color-mix(in srgb, var(--color-path-alignment-strong) 82%, #021b17 18%);
  --swatch-teal-100: color-mix(in srgb, var(--color-path-alignment-strong) 92%, #021b17 8%);
  --swatch-rose-50: color-mix(in srgb, var(--color-path-scaling-strong) 82%, #1d030a 18%);
  --swatch-pink-50: color-mix(in srgb, #db2777 82%, #210112 18%);
  --swatch-red-50: color-mix(in srgb, #dc2626 82%, #1f0202 18%);
  --swatch-slate-50: color-mix(in srgb, #475569 70%, #04070d 30%);
  --swatch-gray-50: color-mix(in srgb, var(--color-border) 72%, #060a12 28%);

  /* Semantic panel tokens (dark) */
  --panel-info-bg: #111a35;
  --panel-info-border: #27418e;
  --panel-info-border-strong: #4c63d9;
  --panel-info-heading: #dbe4ff;
  --panel-info-text: #aec4ff;
  --panel-info-muted: #8b9cc7;
  --panel-info-strong: #cbd5ff;
  --panel-info-link-hover: #e3e8ff;

  --panel-success-bg: #0d1f18;
  --panel-success-border: #1f6f5e;
  --panel-success-border-strong: #34d399;
  --panel-success-heading: #a7f3d0;
  --panel-success-text: #6fe7b7;
  --panel-success-muted: #4ade80;
  --panel-success-strong: #bbf7d0;
  --panel-success-link-hover: #dcfce7;

  --panel-warning-bg: #23190a;
  --panel-warning-border: #d97706;
  --panel-warning-border-strong: #f59e0b;
  --panel-warning-heading: #fde68a;
  --panel-warning-text: #facc15;
  --panel-warning-muted: #fbbf24;
  --panel-warning-strong: #fcd34d;
  --panel-warning-link-hover: #fef3c7;

  --panel-accent-bg: #1a102e;
  --panel-accent-border: #7e22ce;
  --panel-accent-border-strong: #a855f7;
  --panel-accent-heading: #e9d5ff;
  --panel-accent-text: #d6b5ff;
  --panel-accent-muted: #cabffd;
  --panel-accent-strong: #f3e8ff;
  --panel-accent-link-hover: #f5f3ff;

  --panel-neutral-bg: #111827;
  --panel-neutral-border: #1f2937;
  --panel-neutral-border-strong: #334155;
  --panel-neutral-heading: #f8fafc;
  --panel-neutral-text: #d1d5db;
  --panel-neutral-muted: #94a3b8;
  --panel-neutral-strong: #e2e8f0;
  --panel-neutral-link-hover: #f8fafc;

  /* Chip tokens (dark) */
  --chip-info-bg: rgba(76, 99, 217, 0.22);
  --chip-info-border: #4c63d9;
  --chip-info-text: #dbe4ff;

  --chip-success-bg: rgba(22, 163, 74, 0.22);
  --chip-success-border: #34d399;
  --chip-success-text: #bbf7d0;

  --chip-warning-bg: rgba(245, 158, 11, 0.24);
  --chip-warning-border: #f59e0b;
  --chip-warning-text: #fde68a;

  --chip-accent-bg: rgba(168, 85, 247, 0.24);
  --chip-accent-border: #a855f7;
  --chip-accent-text: #e9d5ff;

  --chip-neutral-bg: rgba(148, 163, 184, 0.18);
  --chip-neutral-border: #475569;
  --chip-neutral-text: #e2e8f0;

  --color-path-foundations-strong: #6366f1;
  --color-path-foundations-strong-hover: #4f46e5;
  --color-path-foundations-text: #cdd6ff;
  --color-path-foundations-soft: rgba(79, 70, 229, 0.28);
  --color-path-foundations-border: rgba(99, 102, 241, 0.48);

  --color-path-generation-strong: #a855f7;
  --color-path-generation-strong-hover: #9333ea;
  --color-path-generation-text: #edd0ff;
  --color-path-generation-soft: rgba(168, 85, 247, 0.28);
  --color-path-generation-border: rgba(168, 85, 247, 0.5);

  --color-path-training-strong: #0ea5e9;
  --color-path-training-strong-hover: #0284c7;
  --color-path-training-text: #cde9ff;
  --color-path-training-soft: rgba(14, 165, 233, 0.28);
  --color-path-training-border: rgba(14, 165, 233, 0.5);

  --color-path-scaling-strong: #f43f5e;
  --color-path-scaling-strong-hover: #e11d48;
  --color-path-scaling-text: #fecdd6;
  --color-path-scaling-soft: rgba(244, 63, 94, 0.28);
  --color-path-scaling-border: rgba(244, 63, 94, 0.5);

  --color-path-alignment-strong: #14b8a6;
  --color-path-alignment-strong-hover: #0d9488;
  --color-path-alignment-text: #a7f7ec;
  --color-path-alignment-soft: rgba(20, 184, 166, 0.28);
  --color-path-alignment-border: rgba(20, 184, 166, 0.5);
}

body {
  background-color: var(--color-surface);
  color: var(--color-body);
  transition: background-color .25s ease, color .25s ease;
}

.bg-surface,
.bg-card,
.bg-subtle,
.border-divider,
.border-subtle,
.text-heading,
.text-body,
.text-secondary,
.text-muted,
.text-muted-soft,
.text-muted-faint,
.text-link,
.badge-pill {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease;
}

.bg-surface { background-color: var(--color-surface); }
.bg-card { background-color: var(--color-card); }
.bg-subtle { background-color: var(--color-subtle-bg); }
.text-heading { color: var(--color-heading); }
.text-body { color: var(--color-body); }
.text-secondary { color: var(--color-secondary); }
.text-muted { color: var(--color-muted); }
.text-muted-soft { color: var(--color-muted-soft); }
.text-muted-faint { color: var(--color-muted-faint); }
.border-divider { border-color: var(--color-border); }
.border-subtle { border-color: var(--color-border-subtle); }
.hover\:bg-subtle:hover { background-color: var(--color-subtle-bg); }
.hover\:text-heading:hover { color: var(--color-heading); }
.text-link { color: var(--color-link); }
.text-link:hover { color: var(--color-link-hover); }

.panel {
  --panel-bg: var(--color-card);
  --panel-border: var(--color-border-subtle);
  --panel-border-strong: var(--accent-border);
  --panel-heading: var(--color-heading);
  --panel-text: var(--color-body);
  --panel-muted: var(--color-muted);
  --panel-strong: var(--color-heading);
  --panel-link: var(--accent-text);
  --panel-link-hover: var(--accent-strong-hover);
  background-color: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: 0.85rem;
  color: var(--panel-text);
  transition: background-color .25s ease, border-color .25s ease, color .25s ease;
}
.panel > :where(h1,h2,h3,h4,h5,h6) {
  color: var(--panel-heading);
}
.panel :where(.panel-muted) {
  color: var(--panel-muted);
}
.panel a {
  color: var(--panel-link);
  transition: color .2s ease;
}
.panel a:hover {
  color: var(--panel-link-hover);
}
.panel-emphasis {
  border-left-width: 4px;
  border-left-color: var(--panel-border-strong);
}

.panel-info {
  --panel-bg: var(--panel-info-bg);
  --panel-border: var(--panel-info-border);
  --panel-border-strong: var(--panel-info-border-strong);
  --panel-heading: var(--panel-info-heading);
  --panel-text: var(--panel-info-text);
  --panel-muted: var(--panel-info-muted);
  --panel-strong: var(--panel-info-strong);
  --panel-link: var(--panel-info-strong);
  --panel-link-hover: var(--panel-info-link-hover);
}

.panel-success {
  --panel-bg: var(--panel-success-bg);
  --panel-border: var(--panel-success-border);
  --panel-border-strong: var(--panel-success-border-strong);
  --panel-heading: var(--panel-success-heading);
  --panel-text: var(--panel-success-text);
  --panel-muted: var(--panel-success-muted);
  --panel-strong: var(--panel-success-strong);
  --panel-link: var(--panel-success-strong);
  --panel-link-hover: var(--panel-success-link-hover);
}

.panel-warning {
  --panel-bg: var(--panel-warning-bg);
  --panel-border: var(--panel-warning-border);
  --panel-border-strong: var(--panel-warning-border-strong);
  --panel-heading: var(--panel-warning-heading);
  --panel-text: var(--panel-warning-text);
  --panel-muted: var(--panel-warning-muted);
  --panel-strong: var(--panel-warning-strong);
  --panel-link: var(--panel-warning-strong);
  --panel-link-hover: var(--panel-warning-link-hover);
}


.panel-warning .small-caption {
  color: color-mix(in srgb, var(--tone-amber-strong) 60%, var(--color-heading) 40%);
}
html.dark .panel-warning .small-caption {
  color: color-mix(in srgb, var(--tone-amber-strong) 35%, #ffffff 65%);
}
.panel-accent {
  --panel-bg: var(--panel-accent-bg);
  --panel-border: var(--panel-accent-border);
  --panel-border-strong: var(--panel-accent-border-strong);
  --panel-heading: var(--panel-accent-heading);
  --panel-text: var(--panel-accent-text);
  --panel-muted: var(--panel-accent-muted);
  --panel-strong: var(--panel-accent-strong);
  --panel-link: var(--panel-accent-strong);
  --panel-link-hover: var(--panel-accent-link-hover);
}

.panel-neutral {
  --panel-bg: var(--panel-neutral-bg);
  --panel-border: var(--panel-neutral-border);
  --panel-border-strong: var(--panel-neutral-border-strong);
  --panel-heading: var(--panel-neutral-heading);
  --panel-text: var(--panel-neutral-text);
  --panel-muted: var(--panel-neutral-muted);
  --panel-strong: var(--panel-neutral-strong);
  --panel-link: var(--panel-neutral-strong);
  --panel-link-hover: var(--panel-neutral-link-hover);
}

.panel-neutral-soft {
  --panel-bg: color-mix(in srgb, var(--panel-neutral-bg) 60%, var(--color-card) 40%);
  --panel-border: color-mix(in srgb, var(--panel-neutral-border) 70%, transparent 30%);
  --panel-heading: var(--panel-neutral-heading);
  --panel-text: var(--panel-neutral-text);
  --panel-muted: color-mix(in srgb, var(--panel-neutral-muted) 80%, transparent 20%);
  --panel-border-strong: var(--panel-neutral-border-strong);
  --panel-link: var(--panel-neutral-strong);
  --panel-link-hover: var(--panel-neutral-link-hover);
}

.text-info { color: var(--panel-info-strong); }
.text-success { color: var(--panel-success-strong); }
.text-info { color: var(--panel-info-strong); }
.text-warning { color: var(--panel-warning-strong); }
.text-accent { color: var(--panel-accent-strong); }
.text-neutral-muted { color: var(--panel-neutral-muted); }
.text-danger { color: #dc2626; }
html.dark .text-danger { color: #fca5a5; }

.chip {
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0.35rem;
  padding: 0.125rem 0.6rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  border: 1px solid var(--chip-border, transparent);
  background-color: var(--chip-bg, var(--color-subtle-bg));
  color: var(--chip-text, var(--color-body));
  transition: background-color .2s ease, border-color .2s ease, color .2s ease;
}

.chip-info {
  --chip-bg: var(--chip-info-bg);
  --chip-border: var(--chip-info-border);
  --chip-text: var(--chip-info-text);
}

.chip-success {
  --chip-bg: var(--chip-success-bg);
  --chip-border: var(--chip-success-border);
  --chip-text: var(--chip-success-text);
}

.chip-warning {
  --chip-bg: var(--chip-warning-bg);
  --chip-border: var(--chip-warning-border);
  --chip-text: var(--chip-warning-text);
}

.chip-accent {
  --chip-bg: var(--chip-accent-bg);
  --chip-border: var(--chip-accent-border);
  --chip-text: var(--chip-accent-text);
}

.chip-neutral {
  --chip-bg: var(--chip-neutral-bg);
  --chip-border: var(--chip-neutral-border);
  --chip-text: var(--chip-neutral-text);
}

.view-toggle button {
  padding: 0.4rem 0.9rem;
  border-radius: 0.65rem;
  border: 1px solid transparent;
  color: var(--panel-neutral-muted);
  background-color: transparent;
  transition: background-color .2s ease, color .2s ease, border-color .2s ease;
}
.view-toggle button.toggle-active {
  color: var(--panel-info-heading);
  background-color: var(--panel-info-bg);
  border-color: var(--panel-info-border-strong);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--panel-info-border-strong) 25%, transparent);
}
.view-toggle button.toggle-inactive {
  color: var(--panel-neutral-muted);
  background-color: transparent;
  border-color: color-mix(in srgb, var(--panel-neutral-border) 40%, transparent);
}

.bg-white { background-color: var(--color-card); }
html.dark .bg-white { background-color: color-mix(in srgb, var(--color-card) 96%, transparent 4%); }

.bg-gray-50 {
  background-color: color-mix(in srgb, var(--color-card) 92%, var(--color-surface) 8%);
}
html.dark .bg-gray-50 {
  background-color: color-mix(in srgb, var(--color-card) 86%, transparent 14%);
}

.bg-gray-100 {
  background-color: color-mix(in srgb, var(--color-card) 84%, var(--color-border-subtle) 16%);
}
html.dark .bg-gray-100 {
  background-color: color-mix(in srgb, var(--color-card) 72%, var(--color-border) 28%);
}

.bg-gray-200 {
  background-color: color-mix(in srgb, var(--color-card) 58%, var(--color-border) 42%);
}
html.dark .bg-gray-200 {
  background-color: color-mix(in srgb, var(--color-card) 48%, var(--color-border) 52%);
}

.border-gray-100 { border-color: color-mix(in srgb, var(--color-border-subtle) 65%, var(--color-card) 35%); }
.border-gray-200 { border-color: var(--color-border-subtle); }
.border-gray-300 { border-color: color-mix(in srgb, var(--color-border) 62%, var(--color-border-subtle) 38%); }
.border-gray-400 { border-color: color-mix(in srgb, var(--color-border) 78%, transparent 22%); }

.text-gray-900 { color: var(--color-heading); }
.text-gray-800 {
  color: color-mix(in srgb, var(--color-heading) 85%, var(--color-secondary) 15%);
}
.text-gray-700 { color: var(--color-secondary); }
.text-gray-600 { color: var(--color-muted); }
.text-gray-500 { color: var(--color-muted-soft); }
.text-gray-400 {
  color: color-mix(in srgb, var(--color-muted-soft) 60%, var(--color-muted-faint) 40%);
}
.text-gray-300 { color: var(--color-muted-faint); }
.text-gray-200 {
  color: color-mix(in srgb, var(--color-muted-faint) 45%, #fff 55%);
}

.badge-pill {
  background-color: var(--color-subtle-bg);
  color: var(--color-secondary);
  border: 1px solid var(--color-border-subtle);
}

/* Accent mapping */
[data-accent],
[data-path],
[data-path-theme] {
  --accent-strong: var(--color-link);
  --accent-strong-hover: var(--color-link-hover);
  --accent-text: var(--color-link);
  --accent-soft: var(--color-subtle-bg);
  --accent-border: var(--color-border-subtle);
}

[data-accent="foundations"],
[data-path="foundations"],
[data-path-theme="foundations"] {
  --accent-strong: var(--color-path-foundations-strong);
  --accent-strong-hover: var(--color-path-foundations-strong-hover);
  --accent-text: var(--color-path-foundations-text);
  --accent-soft: var(--color-path-foundations-soft);
  --accent-border: var(--color-path-foundations-border);
}

[data-accent="generation"],
[data-path="generation"],
[data-path-theme="generation"] {
  --accent-strong: var(--color-path-generation-strong);
  --accent-strong-hover: var(--color-path-generation-strong-hover);
  --accent-text: var(--color-path-generation-text);
  --accent-soft: var(--color-path-generation-soft);
  --accent-border: var(--color-path-generation-border);
}

[data-accent="training"],
[data-path="training"],
[data-path-theme="training"] {
  --accent-strong: var(--color-path-training-strong);
  --accent-strong-hover: var(--color-path-training-strong-hover);
  --accent-text: var(--color-path-training-text);
  --accent-soft: var(--color-path-training-soft);
  --accent-border: var(--color-path-training-border);
}

[data-accent="alignment"],
[data-path="alignment"],
[data-path-theme="alignment"] {
  --accent-strong: var(--color-path-alignment-strong);
  --accent-strong-hover: var(--color-path-alignment-strong-hover);
  --accent-text: var(--color-path-alignment-text);
  --accent-soft: var(--color-path-alignment-soft);
  --accent-border: var(--color-path-alignment-border);
}

[data-accent="scaling"],
[data-path="scaling"],
[data-path-theme="scaling"] {
  --accent-strong: var(--color-path-scaling-strong);
  --accent-strong-hover: var(--color-path-scaling-strong-hover);
  --accent-text: var(--color-path-scaling-text);
  --accent-soft: var(--color-path-scaling-soft);
  --accent-border: var(--color-path-scaling-border);
}

.btn-accent {
  background-color: var(--accent-strong);
  color: #fff;
  border: 1px solid transparent;
  border-radius: 0.5rem;
  transition: background-color .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.btn-accent:hover { background-color: var(--accent-strong-hover); }
.btn-accent:focus-visible {
  outline: 2px solid var(--accent-strong-hover);
  outline-offset: 2px;
}

.btn-soft {
  background-color: var(--accent-soft);
  color: var(--accent-text);
  border: 1px solid var(--accent-border);
  border-radius: 0.375rem;
  transition: background-color .2s ease, color .2s ease, border-color .2s ease;
}
.btn-soft:hover { background-color: var(--accent-strong); color: #fff; }
.btn-soft:focus-visible {
  outline: 2px solid var(--accent-strong);
  outline-offset: 2px;
}

.btn-accent[disabled],
.btn-soft[disabled] {
  opacity: 0.55;
  cursor: not-allowed;
  pointer-events: none;
}

.path-card {
  border: 1px solid var(--color-border);
  background: var(--color-card);
  transition: border-color .2s ease, box-shadow .2s ease, transform .2s ease;
}
.path-card:hover {
  border-color: var(--accent-border);
  box-shadow: 0 12px 24px -18px rgba(15, 23, 42, 0.4);
  transform: translateY(-1px);
}
.path-card:focus-visible {
  outline: 2px solid var(--accent-strong);
  outline-offset: 3px;
}
.path-card .path-title { color: var(--accent-text); }
.path-card .path-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.125rem 0.5rem;
  font-size: 0.75rem;
  border-radius: 9999px;
  font-weight: 600;
  background-color: var(--accent-soft);
  color: var(--accent-text);
  border: 1px solid var(--accent-border);
}
.path-card .path-cta {
  color: var(--accent-text);
  opacity: 0.78;
  transition: color .2s ease, opacity .2s ease;
  text-decoration: underline;
  text-decoration-color: color-mix(in srgb, var(--accent-text) 70%, transparent);
  text-decoration-thickness: 2px;
  text-underline-offset: 4px;
}
.path-card:hover .path-cta,
.path-card:focus-within .path-cta {
  opacity: 1;
  color: var(--accent-strong-hover);
  text-decoration-color: currentColor;
}
html.dark .path-card .path-cta:hover,
html.dark .path-card .path-cta:focus {
  color: var(--accent-strong);
}

.path-banner {
  border: 1px solid var(--accent-border);
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent-soft) 70%, transparent), color-mix(in srgb, var(--accent-soft) 30%, var(--color-card)));
  color: var(--color-body);
  box-shadow: 0 12px 30px -20px rgba(15, 23, 42, 0.55);
  border-radius: 0.75rem;
}
html.dark .path-banner {
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent-soft) 55%, transparent), color-mix(in srgb, var(--accent-soft) 45%, var(--color-card)));
  box-shadow: 0 16px 32px -22px rgba(2, 6, 23, 0.7);
}
.path-banner .path-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  border: 1px solid rgba(255,255,255,0.4);
  background-color: rgba(255,255,255,0.7);
  color: var(--accent-text);
}
html.dark .path-banner .path-chip {
  border-color: rgba(255,255,255,0.2);
  background-color: rgba(255,255,255,0.08);
}

.path-progress {
  width: 100%;
  height: 0.5rem;
  border-radius: 9999px;
  background-color: rgba(255,255,255,0.7);
  overflow: hidden;
}
html.dark .path-progress {
  background-color: rgba(255,255,255,0.14);
}
.path-progress-bar {
  height: 100%;
  background-color: var(--accent-strong);
  border-radius: inherit;
  transition: width .25s ease;
}

.path-indicator-pill {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.25rem 0.6rem;
  border-radius: 9999px;
  background-color: var(--accent-soft);
  color: var(--accent-text);
  border: 1px solid var(--accent-border);
  font-weight: 600;
}

.filter-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  padding: 0.4rem 0.85rem;
  border-radius: 9999px;
  border: 1px solid var(--color-border-subtle);
  background-color: var(--color-card);
  color: var(--color-secondary);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  transition: background-color .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.filter-chip:hover {
  border-color: var(--accent-border);
  color: var(--accent-text);
}
.filter-chip.active {
  background-color: var(--accent-strong);
  border-color: var(--accent-strong);
  color: #fff;
  box-shadow: 0 8px 18px -16px rgba(15, 23, 42, 0.65);
}
.filter-chip:focus-visible {
  outline: 2px solid var(--accent-strong);
  outline-offset: 2px;
}

.paper-related-card {
  border: 1px solid var(--accent-border);
  background-color: color-mix(in srgb, var(--accent-soft) 40%, var(--color-card) 60%);
  border-radius: 0.75rem;
  padding: 1.25rem;
  box-shadow: 0 15px 35px -30px rgba(15, 23, 42, 0.6);
}
html.dark .paper-related-card {
  background-color: color-mix(in srgb, var(--accent-soft) 22%, var(--color-card) 78%);
  border-color: color-mix(in srgb, var(--accent-border) 60%, transparent);
}
.paper-related-card li {
  border: 1px solid var(--color-border-subtle);
  border-radius: 0.5rem;
  background-color: var(--color-card);
  padding: 0.75rem;
  transition: border-color .2s ease, background-color .2s ease;
}
.paper-related-card li:hover {
  border-color: var(--accent-border);
  background-color: color-mix(in srgb, var(--accent-soft) 40%, var(--color-card) 60%);
}
.paper-related-card .related-question {
  background-color: var(--color-card);
  border: 1px solid var(--accent-border);
  color: var(--accent-text);
  transition: background-color .2s ease, color .2s ease, border-color .2s ease, transform .2s ease;
  display: block;
}
.paper-related-card .related-question:hover,
.paper-related-card .related-question:focus-visible {
  background-color: var(--accent-strong);
  border-color: var(--accent-strong);
  color: #fff;
  transform: translateY(-1px);
  outline: none;
}
.paper-related-card .related-question.related-question-disabled,
.paper-related-card .related-question:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  pointer-events: none;
  border-color: var(--color-border-subtle);
  background-color: color-mix(in srgb, var(--accent-soft) 15%, var(--color-card) 85%);
  color: var(--color-muted);
}
.paper-related-card .related-question-title {
  display: block;
  font-weight: 600;
  color: inherit;
}
.paper-related-card .related-question-subtext {
  display: block;
  margin-top: 0.15rem;
  font-size: 0.75rem;
  color: color-mix(in srgb, var(--accent-text) 70%, var(--color-body) 30%);
  transition: color .2s ease;
}
.paper-related-card .related-question:hover .related-question-subtext,
.paper-related-card .related-question:focus-visible .related-question-subtext {
  color: rgba(255, 255, 255, 0.92);
}
.paper-related-card .related-question.related-question-disabled .related-question-subtext {
  color: var(--color-muted-soft);
}

.paper-overview-card {
  background-color: var(--color-card);
  border: 1px solid var(--color-border-subtle);
  border-radius: 0.9rem;
  box-shadow: 0 18px 42px -28px rgba(15, 23, 42, 0.55);
  padding: 1.5rem;
}
html.dark .paper-overview-card {
  border-color: color-mix(in srgb, var(--color-border) 70%, transparent);
}
.paper-overview-card .bg-white {
  background-color: var(--color-card);
  color: var(--color-body);
}
.paper-overview-card .border-gray-200 { border-color: var(--color-border-subtle); }
.paper-overview-card .text-gray-500 { color: var(--color-muted-soft); }
.paper-overview-card .text-gray-600 { color: var(--color-muted); }
.paper-overview-card .text-gray-700 { color: var(--color-secondary); }
.paper-overview-card .text-gray-900 { color: var(--color-heading); }

.paper-overview-card .bg-indigo-50,
.paper-overview-card .bg-indigo-100 {
  background-color: color-mix(in srgb, var(--tone-indigo-strong) 6%, var(--color-card) 94%);
}
html.dark .paper-overview-card .bg-indigo-50,
html.dark .paper-overview-card .bg-indigo-100 {
  background-color: color-mix(in srgb, var(--tone-indigo-strong) 15%, var(--color-card) 85%);
}
.paper-overview-card .border-indigo-200 {
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 22%, var(--color-border-subtle) 78%);
}
.paper-overview-card .text-indigo-900,
.paper-overview-card .text-indigo-800,
.paper-overview-card .text-indigo-700,
.paper-overview-card .text-indigo-600 {
  color: color-mix(in srgb, var(--tone-indigo-strong) 38%, var(--color-heading) 62%);
}

.paper-overview-card .bg-sky-50,
.paper-overview-card .bg-cyan-50 {
  background-color: color-mix(in srgb, var(--tone-sky-strong) 5%, var(--color-card) 95%);
}
html.dark .paper-overview-card .bg-sky-50,
html.dark .paper-overview-card .bg-cyan-50 {
  background-color: color-mix(in srgb, var(--tone-sky-strong) 14%, var(--color-card) 86%);
}
.paper-overview-card .border-sky-200,
.paper-overview-card .border-cyan-200 {
  border-color: color-mix(in srgb, var(--tone-sky-strong) 20%, var(--color-border-subtle) 80%);
}
.paper-overview-card .text-sky-900,
.paper-overview-card .text-sky-800,
.paper-overview-card .text-sky-700,
.paper-overview-card .text-cyan-900,
.paper-overview-card .text-cyan-800,
.paper-overview-card .text-cyan-700 {
  color: color-mix(in srgb, var(--tone-sky-strong) 34%, var(--color-heading) 66%);
}

.paper-overview-card .bg-emerald-50 {
  background-color: color-mix(in srgb, var(--tone-emerald-strong) 5%, var(--color-card) 95%);
}
html.dark .paper-overview-card .bg-emerald-50 {
  background-color: color-mix(in srgb, var(--tone-emerald-strong) 14%, var(--color-card) 86%);
}
.paper-overview-card .border-emerald-200 {
  border-color: color-mix(in srgb, var(--tone-emerald-strong) 20%, var(--color-border-subtle) 80%);
}
.paper-overview-card .text-emerald-900,
.paper-overview-card .text-emerald-800 {
  color: color-mix(in srgb, var(--tone-emerald-strong) 34%, var(--color-heading) 66%);
}

.paper-overview-card .bg-amber-50,
.paper-overview-card .bg-yellow-50 {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 5%, var(--color-card) 95%);
}
html.dark .paper-overview-card .bg-amber-50,
html.dark .paper-overview-card .bg-yellow-50 {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 15%, var(--color-card) 85%);
}
.paper-overview-card .border-amber-200,
.paper-overview-card .border-yellow-200 {
  border-color: color-mix(in srgb, var(--tone-amber-strong) 20%, var(--color-border-subtle) 80%);
}
.paper-overview-card .text-amber-900,
.paper-overview-card .text-amber-800,
.paper-overview-card .text-yellow-900,
.paper-overview-card .text-yellow-800 {
  color: color-mix(in srgb, var(--tone-amber-strong) 36%, var(--color-heading) 64%);
}

.paper-overview-card .bg-slate-900 {
  background-color: color-mix(in srgb, var(--tone-indigo-strong) 24%, var(--color-card) 76%);
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 36%, rgba(2, 6, 23, 0.75));
  color: rgba(248, 250, 252, 0.95);
}
html.dark .paper-overview-card .bg-slate-900 {
  background-color: color-mix(in srgb, var(--tone-indigo-strong) 22%, var(--color-card) 78%);
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 34%, var(--color-border) 66%);
}
.paper-overview-card .text-slate-100 { color: rgba(248, 250, 252, 0.97); }
.paper-overview-card .text-slate-200 { color: rgba(226, 232, 240, 0.93); }
.paper-overview-card .text-slate-300 { color: rgba(203, 213, 225, 0.9); }

.paper-overview-card .plain-explainer {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 10%, var(--color-card) 90%);
  border: 1px solid color-mix(in srgb, var(--tone-amber-strong) 26%, var(--color-border-subtle) 74%);
  color: color-mix(in srgb, var(--tone-amber-strong) 45%, var(--color-heading) 55%);
}
html.dark .paper-overview-card .plain-explainer {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 22%, var(--color-card) 78%);
  border-color: color-mix(in srgb, var(--tone-amber-strong) 35%, var(--color-border) 65%);
  color: color-mix(in srgb, var(--tone-amber-strong) 60%, var(--color-heading) 40%);
}
.paper-overview-card .border-slate-800 {
  border-color: color-mix(in srgb, var(--color-border) 55%, rgba(2, 6, 23, 0.6));
}




.question-card {
  background-color: var(--color-card);
  border: 1px solid var(--color-border-subtle);
  border-radius: 0.85rem;
  padding: 1.25rem;
  box-shadow: 0 16px 36px -28px rgba(15, 23, 42, 0.6);
}
html.dark .question-card {
  box-shadow: 0 20px 44px -32px rgba(2, 6, 23, 0.7);
}

.question-strategy {
  position: relative;
  display: block;
  border: 1px solid var(--color-border-subtle);
  border-radius: 0.85rem;
  padding: 1rem;
  background-color: var(--color-card);
  transition: border-color .2s ease, background-color .2s ease, box-shadow .2s ease, color .2s ease;
}
.question-strategy input[type="radio"] {
  position: absolute;
  inset: 0;
  margin: 0;
  opacity: 0;
  pointer-events: none;
  accent-color: var(--tone-emerald-strong);
}
.question-strategy-active {
  box-shadow: 0 14px 32px -24px rgba(15, 23, 42, 0.55);
}

.strategy-indicator {
  border: 1px solid var(--color-border-subtle);
  border-radius: 9999px;
  padding: 0.25rem 0.75rem;
  background-color: var(--color-subtle-bg);
  color: var(--color-secondary);
}

.question-token-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.question-token {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.35rem 0.6rem;
  border-radius: 0.65rem;
  border: 1px solid var(--color-border-subtle);
  background-color: var(--color-card);
  color: var(--color-body);
  font-family: 'JetBrains Mono', 'Fira Code', 'Source Code Pro', monospace;
  font-size: 0.85rem;
  transition: transform .2s ease, box-shadow .2s ease;
}
.question-token:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 24px -20px rgba(15, 23, 42, 0.55);
}

.question-output {
  border-radius: 0.85rem;
  border: 2px dashed color-mix(in srgb, var(--accent-border) 45%, transparent);
  background-color: color-mix(in srgb, var(--accent-soft) 22%, var(--color-card) 78%);
  padding: 1.1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.question-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  color: var(--color-secondary);
}
.question-legend-item {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.75rem;
}
.question-legend-dot {
  width: 0.65rem;
  height: 0.65rem;
  border-radius: 9999px;
  border: 1px solid var(--color-border-subtle);
}

.question-stats {
  margin-top: 0.5rem;
  background-color: var(--color-card);
  border: 1px solid var(--color-border-subtle);
  border-radius: 0.85rem;
  padding: 1rem;
  gap: 1rem;
}
.question-stat {
  text-align: center;
}
.question-stat-value {
  font-size: 1.5rem;
  font-weight: 700;
}
.question-stat-label {
  font-size: 0.78rem;
}

.question-token-example {
  display: inline-block;
  margin: 0.85rem 0.1rem 0.4rem;
  padding: 0.5rem 0.85rem;
  border-radius: 0.7rem;
  font-family: 'JetBrains Mono', 'Fira Code', 'Source Code Pro', monospace;
  font-size: 0.8rem;
  border: 1px solid var(--color-border-subtle);
  background-color: color-mix(in srgb, var(--tone-indigo-strong) 10%, var(--color-card) 90%);
  color: color-mix(in srgb, var(--tone-indigo-strong) 55%, var(--color-heading) 45%);
}
.question-token-example[data-tone="emerald"] {
  background-color: color-mix(in srgb, var(--tone-emerald-strong) 12%, var(--color-card) 88%);
  border-color: color-mix(in srgb, var(--tone-emerald-strong) 26%, var(--color-border-subtle) 74%);
  color: color-mix(in srgb, var(--tone-emerald-strong) 52%, var(--color-heading) 48%);
}
.question-token-example[data-tone="purple"] {
  background-color: color-mix(in srgb, var(--tone-purple-strong) 12%, var(--color-card) 88%);
  border-color: color-mix(in srgb, var(--tone-purple-strong) 28%, var(--color-border-subtle) 72%);
  color: color-mix(in srgb, var(--tone-purple-strong) 52%, var(--color-heading) 48%);
}
.question-token-example[data-tone="amber"] {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 12%, var(--color-card) 88%);
  border-color: color-mix(in srgb, var(--tone-amber-strong) 28%, var(--color-border-subtle) 72%);
  color: color-mix(in srgb, var(--tone-amber-strong) 52%, var(--color-heading) 48%);
}

/* Question accent overrides */
.bg-indigo-50 { background-color: var(--swatch-indigo-50); }
.bg-indigo-100 { background-color: var(--swatch-indigo-100); }
.border-indigo-200 { border-color: color-mix(in srgb, var(--tone-indigo-strong) 24%, var(--color-border-subtle) 76%); }
.border-blue-400, .border-blue-200 { border-color: color-mix(in srgb, var(--tone-sky-strong) 24%, var(--color-border-subtle) 76%); }
.border-green-400 { border-color: color-mix(in srgb, var(--tone-emerald-strong) 28%, var(--color-border-subtle) 72%); }
.border-orange-400 { border-color: color-mix(in srgb, var(--tone-amber-strong) 28%, var(--color-border-subtle) 72%); }
.border-yellow-200 { border-color: color-mix(in srgb, var(--tone-amber-strong) 22%, var(--color-border-subtle) 78%); }
.border-emerald-200 { border-color: color-mix(in srgb, var(--tone-emerald-strong) 24%, var(--color-border-subtle) 76%); }
.text-indigo-900 { color: color-mix(in srgb, var(--tone-indigo-strong) 42%, var(--color-heading) 58%); }
.text-indigo-800 { color: color-mix(in srgb, var(--tone-indigo-strong) 34%, var(--color-heading) 66%); }
.text-indigo-700 { color: color-mix(in srgb, var(--tone-indigo-strong) 26%, var(--color-heading) 74%); }

.bg-blue-50 { background-color: var(--swatch-blue-50); }
.text-blue-900, .text-blue-800, .text-blue-700 { color: color-mix(in srgb, var(--tone-sky-strong) 36%, var(--color-heading) 64%); }

.bg-green-50 { background-color: var(--swatch-green-50); }
.bg-green-100 { background-color: var(--swatch-green-100); }
.text-green-900 { color: color-mix(in srgb, var(--tone-emerald-strong) 40%, var(--color-heading) 60%); }
.text-green-700 { color: color-mix(in srgb, var(--tone-emerald-strong) 26%, var(--color-heading) 74%); }

.bg-purple-50 { background-color: var(--swatch-purple-50); }
.bg-purple-100 { background-color: var(--swatch-purple-100); }
.border-purple-400 { border-color: color-mix(in srgb, var(--tone-purple-strong) 28%, var(--color-border-subtle) 72%); }
.text-purple-900 { color: color-mix(in srgb, var(--tone-purple-strong) 40%, var(--color-heading) 60%); }
.text-purple-700 { color: color-mix(in srgb, var(--tone-purple-strong) 28%, var(--color-heading) 72%); }

.bg-orange-50 { background-color: var(--swatch-orange-50); }
.bg-orange-100 { background-color: var(--swatch-orange-100); }
.text-orange-900 { color: color-mix(in srgb, var(--tone-amber-strong) 40%, var(--color-heading) 60%); }
.text-orange-700 { color: color-mix(in srgb, var(--tone-amber-strong) 28%, var(--color-heading) 72%); }

.bg-yellow-50 { background-color: var(--swatch-yellow-50); }
.text-yellow-900 { color: color-mix(in srgb, var(--tone-amber-strong) 38%, var(--color-heading) 62%); }
.text-yellow-800 { color: color-mix(in srgb, var(--tone-amber-strong) 30%, var(--color-heading) 70%); }

.bg-emerald-50 { background-color: var(--swatch-emerald-50); }
.bg-emerald-100 { background-color: var(--swatch-emerald-100); }
.bg-cyan-50 { background-color: var(--swatch-cyan-50); }
.bg-teal-50 { background-color: var(--swatch-teal-50); }
.bg-rose-50 { background-color: var(--swatch-rose-50); }
.bg-pink-50 { background-color: var(--swatch-pink-50); }
.bg-red-50 { background-color: var(--swatch-red-50); }
.bg-slate-50 { background-color: var(--swatch-slate-50); }
.bg-gray-50 { background-color: var(--swatch-gray-50); }

.from-indigo-50 {
  --tw-gradient-from: var(--swatch-indigo-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-indigo-50) 0%, transparent 100%));
}
.from-indigo-100 {
  --tw-gradient-from: var(--swatch-indigo-100);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-indigo-100) 0%, transparent 100%));
}
.to-indigo-50 { --tw-gradient-to: var(--swatch-indigo-50); }
.to-indigo-100 { --tw-gradient-to: var(--swatch-indigo-100); }
.via-indigo-50 {
  --tw-gradient-stops: var(--tw-gradient-from), var(--swatch-indigo-50), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-indigo-50) 0%, transparent 100%));
}

.from-blue-50 {
  --tw-gradient-from: var(--swatch-blue-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-blue-50) 0%, transparent 100%));
}
.from-blue-100 {
  --tw-gradient-from: var(--swatch-blue-100);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-blue-100) 0%, transparent 100%));
}
.to-blue-50 { --tw-gradient-to: var(--swatch-blue-50); }
.to-blue-100 { --tw-gradient-to: var(--swatch-blue-100); }
.via-blue-50 {
  --tw-gradient-stops: var(--tw-gradient-from), var(--swatch-blue-50), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-blue-50) 0%, transparent 100%));
}

.from-purple-50 {
  --tw-gradient-from: var(--swatch-purple-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-purple-50) 0%, transparent 100%));
}
.from-purple-100 {
  --tw-gradient-from: var(--swatch-purple-100);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-purple-100) 0%, transparent 100%));
}
.to-purple-50 { --tw-gradient-to: var(--swatch-purple-50); }
.to-purple-100 { --tw-gradient-to: var(--swatch-purple-100); }
.via-purple-50 {
  --tw-gradient-stops: var(--tw-gradient-from), var(--swatch-purple-50), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-purple-50) 0%, transparent 100%));
}

.from-orange-50 {
  --tw-gradient-from: var(--swatch-orange-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-orange-50) 0%, transparent 100%));
}
.to-orange-50 { --tw-gradient-to: var(--swatch-orange-50); }
.to-orange-100 { --tw-gradient-to: var(--swatch-orange-100); }

.from-amber-50 {
  --tw-gradient-from: var(--swatch-amber-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-amber-50) 0%, transparent 100%));
}
.to-amber-50 { --tw-gradient-to: var(--swatch-amber-50); }

.from-green-50 {
  --tw-gradient-from: var(--swatch-green-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-green-50) 0%, transparent 100%));
}
.to-green-50 { --tw-gradient-to: var(--swatch-green-50); }

.from-cyan-50 {
  --tw-gradient-from: var(--swatch-cyan-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-cyan-50) 0%, transparent 100%));
}
.to-cyan-50 { --tw-gradient-to: var(--swatch-cyan-50); }

.from-sky-50 {
  --tw-gradient-from: var(--swatch-sky-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-sky-50) 0%, transparent 100%));
}
.to-sky-50 { --tw-gradient-to: var(--swatch-sky-50); }

.from-teal-50 {
  --tw-gradient-from: var(--swatch-teal-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-teal-50) 0%, transparent 100%));
}
.to-teal-50 { --tw-gradient-to: var(--swatch-teal-50); }

.from-rose-50 {
  --tw-gradient-from: var(--swatch-rose-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-rose-50) 0%, transparent 100%));
}
.to-rose-50 { --tw-gradient-to: var(--swatch-rose-50); }

.from-pink-50 {
  --tw-gradient-from: var(--swatch-pink-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-pink-50) 0%, transparent 100%));
}
.to-pink-50 { --tw-gradient-to: var(--swatch-pink-50); }

.from-red-50 {
  --tw-gradient-from: var(--swatch-red-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-red-50) 0%, transparent 100%));
}
.to-red-50 { --tw-gradient-to: var(--swatch-red-50); }

.from-gray-50 {
  --tw-gradient-from: var(--swatch-gray-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-gray-50) 0%, transparent 100%));
}
.to-gray-50 { --tw-gradient-to: var(--swatch-gray-50); }

.from-slate-50 {
  --tw-gradient-from: var(--swatch-slate-50);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, color-mix(in srgb, var(--swatch-slate-50) 0%, transparent 100%));
}
.to-slate-50 { --tw-gradient-to: var(--swatch-slate-50); }

html.dark .border-indigo-200 {
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 78%, var(--color-border) 22%);
}
html.dark .border-blue-400,
html.dark .border-blue-200 {
  border-color: color-mix(in srgb, var(--tone-sky-strong) 76%, var(--color-border) 24%);
}
html.dark .border-green-400,
html.dark .border-emerald-200 {
  border-color: color-mix(in srgb, var(--tone-emerald-strong) 74%, var(--color-border) 26%);
}
html.dark .border-orange-400,
html.dark .border-yellow-200 {
  border-color: color-mix(in srgb, var(--tone-amber-strong) 76%, var(--color-border) 24%);
}

code.bg-green-100 { background-color: color-mix(in srgb, var(--tone-emerald-strong) 18%, var(--color-card) 82%); }
code.bg-purple-100 { background-color: color-mix(in srgb, var(--tone-purple-strong) 18%, var(--color-card) 82%); }
code.bg-orange-100 { background-color: color-mix(in srgb, var(--tone-amber-strong) 18%, var(--color-card) 82%); }
.paper-interactive-card {
  border: 1px solid var(--accent-border);
  background-color: color-mix(in srgb, var(--accent-soft) 15%, var(--color-card) 85%);
  border-radius: 0.9rem;
  box-shadow: 0 18px 42px -32px rgba(15, 23, 42, 0.6);
  padding: 1.5rem;
}
html.dark .paper-interactive-card {
  border-color: color-mix(in srgb, var(--accent-border) 65%, transparent);
  background-color: color-mix(in srgb, var(--accent-soft) 25%, var(--color-card) 75%);
}
.paper-interactive-card .bg-gradient-to-r {
  background: color-mix(in srgb, var(--tone-indigo-strong) 9%, var(--color-card) 91%);
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 24%, var(--color-border-subtle) 76%);
  box-shadow: 0 14px 32px -24px rgba(15, 23, 42, 0.55);
}
html.dark .paper-interactive-card .bg-gradient-to-r {
  background: color-mix(in srgb, var(--tone-indigo-strong) 16%, var(--color-card) 84%);
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 30%, var(--color-border) 70%);
}
.paper-interactive-card .bg-white { background-color: var(--color-card); }
.paper-interactive-card .border-gray-200 { border-color: var(--color-border-subtle); }
.paper-interactive-card .text-gray-500 { color: var(--color-muted-soft); }
.paper-interactive-card .text-gray-600 { color: var(--color-muted); }
.paper-interactive-card .text-gray-700 { color: var(--color-secondary); }
.paper-interactive-card .text-gray-900 { color: var(--color-heading); }
.paper-interactive-card select,
.paper-interactive-card .select-input {
  background-color: var(--color-card);
  color: var(--color-body);
  border: 1px solid var(--accent-border);
  border-radius: 0.65rem;
  transition: border-color .2s ease, box-shadow .2s ease;
}
html.dark .paper-interactive-card select,
html.dark .paper-interactive-card .select-input {
  border-color: color-mix(in srgb, var(--accent-border) 65%, transparent);
}
.paper-interactive-card select:focus {
  border-color: var(--accent-strong);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-strong) 25%, transparent);
  outline: none;
}
.paper-interactive-card input[type="range"] { accent-color: var(--tone-indigo-strong); }
.paper-interactive-card input[type="checkbox"] { accent-color: var(--tone-indigo-strong); }
.paper-interactive-card .bg-emerald-50 {
  background-color: color-mix(in srgb, var(--tone-emerald-strong) 12%, var(--color-card) 88%);
}
html.dark .paper-interactive-card .bg-emerald-50 {
  background-color: color-mix(in srgb, var(--tone-emerald-strong) 22%, var(--color-card) 78%);
}
.paper-interactive-card .border-emerald-200 {
  border-color: color-mix(in srgb, var(--tone-emerald-strong) 36%, var(--color-border-subtle) 64%);
}
.paper-interactive-card .text-emerald-900,
.paper-interactive-card .text-emerald-800,
.paper-interactive-card .text-emerald-600 { color: var(--tone-emerald-text); }
.paper-interactive-card .bg-amber-50,
.paper-interactive-card .bg-yellow-50 {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 14%, var(--color-card) 86%);
}
html.dark .paper-interactive-card .bg-amber-50,
html.dark .paper-interactive-card .bg-yellow-50 {
  background-color: color-mix(in srgb, var(--tone-amber-strong) 24%, var(--color-card) 76%);
}
.paper-interactive-card .border-amber-200,
.paper-interactive-card .border-yellow-200 {
  border-color: color-mix(in srgb, var(--tone-amber-strong) 38%, var(--color-border-subtle) 62%);
}
.paper-interactive-card .text-amber-900,
.paper-interactive-card .text-amber-800,
.paper-interactive-card .text-yellow-900,
.paper-interactive-card .text-yellow-800 { color: var(--tone-amber-text); }
.paper-interactive-card .bg-rose-50 {
  background-color: color-mix(in srgb, var(--tone-rose-strong) 12%, var(--color-card) 88%);
}
html.dark .paper-interactive-card .bg-rose-50 {
  background-color: color-mix(in srgb, var(--tone-rose-strong) 24%, var(--color-card) 76%);
}
.paper-interactive-card .border-rose-200 {
  border-color: color-mix(in srgb, var(--tone-rose-strong) 36%, var(--color-border-subtle) 64%);
}
.paper-interactive-card .text-rose-900,
.paper-interactive-card .text-rose-800,
.paper-interactive-card .text-rose-600 { color: var(--tone-rose-text); }

.paper-interactive-card .text-blue-900,
.paper-interactive-card .text-blue-800,
.paper-interactive-card .text-blue-700,
.paper-interactive-card .text-blue-600 {
  color: color-mix(in srgb, var(--tone-indigo-strong) 36%, var(--color-heading) 64%);
}
.paper-interactive-card .text-indigo-900,
.paper-interactive-card .text-indigo-800,
.paper-interactive-card .text-indigo-700,
.paper-interactive-card .text-indigo-600 { color: var(--tone-indigo-text); }
.paper-interactive-card .text-purple-900,
.paper-interactive-card .text-purple-800,
.paper-interactive-card .text-purple-700 { color: var(--tone-purple-text); }
.paper-interactive-card .related-question-subtext { color: color-mix(in srgb, var(--accent-text) 70%, var(--color-body) 30%); }
.paper-interactive-card .related-question:hover .related-question-subtext,
.paper-interactive-card .related-question:focus-visible .related-question-subtext { color: rgba(255, 255, 255, 0.92); }
.paper-interactive-card .related-question.related-question-disabled .related-question-subtext { color: var(--color-muted-soft); }

.badge-accent {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  border: 1px solid var(--accent-border);
  background-color: var(--accent-soft);
  color: var(--accent-text);
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.tag-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.275rem 0.65rem;
  border-radius: 9999px;
  border: 1px solid var(--accent-border);
  background-color: var(--accent-soft);
  color: var(--accent-text);
  font-size: 0.7rem;
  font-weight: 500;
  text-transform: none;
  letter-spacing: 0;
  transition: background-color .2s ease, color .2s ease, border-color .2s ease;
}
.tag-chip:hover {
  background-color: var(--accent-strong);
  border-color: var(--accent-strong);
  color: #fff;
}
html.dark .tag-chip { background-color: color-mix(in srgb, var(--accent-soft) 75%, transparent); }

.text-accent { color: var(--accent-text); }
.link-accent {
  color: var(--accent-strong);
  transition: color .2s ease;
}
.link-accent:hover { color: var(--accent-strong-hover); }

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Question 02 attention explorer */
.q2-sentence-surface {
  position: relative;
  min-height: 220px;
  padding: 4.5rem 1.5rem 1.5rem;
  border-radius: 0.85rem;
  border: 2px dashed color-mix(in srgb, var(--accent-border) 45%, transparent);
  background: color-mix(in srgb, var(--accent-soft) 24%, var(--color-card) 76%);
  text-align: center;
  font-size: 1.05rem;
  line-height: 2.1;
  overflow: hidden;
}
html.dark .q2-sentence-surface {
  background: color-mix(in srgb, var(--accent-soft) 55%, transparent 45%);
}
.q2-canvas-layer {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}
.q2-sentence-hint {
  position: absolute;
  top: -0.3rem;
  left: 50%;
  transform: translateX(-50%);
  padding: 0.35rem 0.85rem;
  border-radius: 0.75rem;
  background: var(--color-card);
  border: 1px solid var(--accent-border);
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-secondary);
  z-index: 3;
  box-shadow: 0 6px 18px -12px rgba(15, 23, 42, 0.55);
  white-space: nowrap;
}

.q2-word {
  position: relative;
  z-index: 2;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.35rem 0.8rem;
  margin: 0.25rem;
  border-radius: 0.75rem;
  border: 1px solid color-mix(in srgb, var(--accent-border) 75%, transparent);
  background: var(--color-card);
  color: var(--color-heading);
  font-size: 0.95rem;
  font-weight: 500;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background-color .2s ease, color .2s ease;
}
.q2-word:hover {
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 32%, var(--accent-border) 68%);
  background: color-mix(in srgb, var(--tone-indigo-strong) 16%, var(--color-card) 84%);
  color: var(--tone-indigo-text);
  box-shadow: 0 12px 24px -20px rgba(15, 23, 42, 0.55);
}
.q2-word.is-active {
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 55%, var(--accent-border) 45%);
  background: color-mix(in srgb, var(--tone-indigo-strong) 50%, var(--color-card) 50%);
  color: rgba(255, 255, 255, 0.94);
  box-shadow: 0 16px 28px -18px rgba(15, 23, 42, 0.6);
}
.q2-word.attn-high {
  border-color: color-mix(in srgb, var(--tone-amber-strong) 45%, var(--accent-border) 55%);
  background: linear-gradient(90deg, color-mix(in srgb, var(--tone-amber-strong) 48%, transparent), color-mix(in srgb, var(--tone-amber-strong) 32%, transparent));
  color: var(--color-heading);
}
.q2-word.attn-med {
  border-color: color-mix(in srgb, var(--tone-amber-strong) 32%, var(--accent-border) 68%);
  background: linear-gradient(90deg, color-mix(in srgb, var(--tone-amber-strong) 34%, transparent), color-mix(in srgb, var(--tone-amber-strong) 18%, transparent));
}
.q2-word.attn-low {
  border-color: color-mix(in srgb, var(--tone-amber-strong) 18%, var(--accent-border) 82%);
  background: linear-gradient(90deg, color-mix(in srgb, var(--tone-amber-strong) 18%, transparent), transparent);
}
.q2-word-hint {
  animation: q2-word-pulse 1.6s ease-in-out infinite;
}
@keyframes q2-word-pulse {
  0%, 100% { transform: translateY(0); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.28); }
  50% { transform: translateY(-2px); box-shadow: 0 12px 22px -18px rgba(99, 102, 241, 0.55); }
}
.legend-dot {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-secondary);
}
.legend-dot::before {
  content: '';
  width: 0.65rem;
  height: 0.65rem;
  border-radius: 9999px;
  border: 1px solid var(--accent-border);
  background: color-mix(in srgb, var(--accent-border) 75%, transparent);
  display: inline-block;
}
.legend-dot-muted::before {
  background: color-mix(in srgb, var(--accent-border) 55%, transparent);
}
.legend-dot-accent::before {
  background: color-mix(in srgb, var(--tone-indigo-strong) 45%, transparent);
  border-color: color-mix(in srgb, var(--tone-indigo-strong) 35%, var(--accent-border) 65%);
}
.legend-dot-warning::before {
  background: color-mix(in srgb, var(--tone-amber-strong) 55%, transparent);
  border-color: color-mix(in srgb, var(--tone-amber-strong) 35%, var(--accent-border) 65%);
}
.legend-strength {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  padding: 0.25rem 0.55rem;
  border-radius: 0.6rem;
  border: 1px solid color-mix(in srgb, var(--accent-border) 70%, transparent);
  background: color-mix(in srgb, var(--accent-soft) 18%, transparent);
}
.legend-strength::before {
  content: '';
  width: 1.15rem;
  height: 0.25rem;
  border-radius: 9999px;
  display: inline-block;
  background: color-mix(in srgb, var(--tone-indigo-strong) 45%, transparent);
}
.legend-strength-strong::before {
  background: color-mix(in srgb, var(--tone-indigo-strong) 60%, transparent);
}
.legend-strength-medium::before {
  background: color-mix(in srgb, var(--tone-indigo-strong) 38%, transparent);
}
.legend-strength-weak::before {
  background: color-mix(in srgb, var(--tone-indigo-strong) 24%, transparent);
}
.attention-indicator-dot {
  display: inline-block;
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 9999px;
  background: color-mix(in srgb, var(--tone-indigo-strong) 55%, transparent);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--tone-indigo-strong) 24%, transparent);
  animation: q2-dot-pulse 1.5s ease-in-out infinite;
}
@keyframes q2-dot-pulse {
  0%, 100% { transform: scale(1); opacity: 0.85; }
  50% { transform: scale(1.1); opacity: 1; }
}
.legend-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem 1rem;
  margin-top: 0.75rem;
}
.legend-summary span {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-secondary);
}
.q2-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: color-mix(in srgb, var(--accent-soft) 20%, transparent);
  color: var(--color-secondary);
  font-size: 0.85rem;
}
.q2-empty-state-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-heading);
}
.small-caption {
  font-size: 0.75rem;
  color: var(--color-secondary);
}
.legend-caption {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.75rem;
  color: var(--color-secondary);
}
.legend-tip {
  margin-left: auto;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: color-mix(in srgb, var(--color-secondary) 85%, transparent);
}
.attention-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
}
.chip-tag {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}
.q2-legend {
  font-size: 0.75rem;
  color: var(--color-secondary);
}
.field-textarea {
  width: 100%;
  min-height: 8rem;
  padding: 1rem;
  border-radius: 0.85rem;
  border: 1px solid var(--color-border-subtle);
  background: var(--color-card);
  color: var(--color-body);
  resize: vertical;
  transition: border-color .2s ease, box-shadow .2s ease;
}
.field-textarea:focus {
  border-color: color-mix(in srgb, var(--accent-border) 30%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-border) 18%, transparent);
  outline: none;
}

.field-select {
  display: inline-flex;
  align-items: center;
  border-radius: 0.75rem;
  border: 1px solid var(--color-border-subtle);
  background: var(--color-card);
  color: var(--color-body);
  padding: 0.5rem 0.75rem;
  min-width: 8rem;
  transition: border-color .2s ease, box-shadow .2s ease;
}
.field-select:focus {
  border-color: color-mix(in srgb, var(--accent-border) 35%, transparent);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent-border) 15%, transparent);
  outline: none;
}
.field-select--compact {
  padding: 0.35rem 0.6rem;
}

.context-mode-group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}
.context-mode-option {
  position: relative;
  display: flex;
  gap: 0.75rem;
  align-items: flex-start;
  border-radius: 0.85rem;
  border: 1px solid var(--color-border-subtle);
  padding: 0.75rem 1rem;
  background: var(--color-card);
  cursor: pointer;
  transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
.context-mode-option input[type="radio"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  margin: 0;
  cursor: pointer;
}
.context-mode-option--active {
  background: color-mix(in srgb, var(--accent-soft) 35%, var(--color-card) 65%);
  border-color: color-mix(in srgb, var(--accent-border) 38%, transparent);
  box-shadow: 0 12px 26px -18px rgba(15, 23, 42, 0.55);
}
.context-mode-title {
  font-weight: 600;
  color: var(--color-heading);
}
.context-mode-caption {
  font-size: 0.75rem;
  color: var(--color-secondary);
}

.context-card-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
}

.stacked-card {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  height: 100%;
}
.stacked-card > *:last-child {
  margin-top: auto;
}
.context-card {
  position: relative;
  display: block;
  border: 1px solid var(--color-border-subtle);
  border-radius: 0.95rem;
  padding: 1rem;
  background: var(--color-card);
  cursor: pointer;
  transition: border-color .2s ease, background .2s ease, box-shadow .2s ease;
}
.context-card input[type="radio"] {
  position: absolute;
  inset: 0;
  opacity: 0;
  margin: 0;
  cursor: pointer;
}
.context-card--selected {
  box-shadow: 0 14px 32px -24px rgba(15, 23, 42, 0.55);
}
.context-card-title {
  font-weight: 600;
  color: var(--color-heading);
}
.context-card-caption {
  font-size: 0.85rem;
  color: var(--color-secondary);
}
.context-card-meta {
  font-size: 0.75rem;
  color: var(--color-muted);
}

.context-token-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  font-size: 0.75rem;
  color: var(--color-secondary);
}
.context-token-summary span {
  display: inline-flex;
  gap: 0.25rem;
  align-items: baseline;
}

.context-output {
  min-height: 7rem;
  font-size: 0.9rem;
  line-height: 1.8;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 0.2rem 0.35rem;
}

.context-token {
  display: inline-flex;
  padding: 0.2rem 0.45rem;
  margin: 0 0.08rem 0.3rem;
  min-width: 0;
  align-items: center;
  border-radius: 0.65rem;
  transition: background-color .2s ease, color .2s ease;
}
.context-token--in {
  background: color-mix(in srgb, var(--tone-indigo-strong) 32%, var(--color-card) 68%);
  color: color-mix(in srgb, var(--tone-indigo-strong) 65%, var(--color-heading) 35%);
}
html.dark .context-token--in {
  color: rgba(255, 255, 255, 0.92);
}
.context-token--out {
  background: color-mix(in srgb, var(--tone-indigo-strong) 9%, var(--color-card) 91%);
  border: 1px dashed color-mix(in srgb, var(--tone-indigo-strong) 22%, var(--accent-border) 78%);
  color: color-mix(in srgb, var(--tone-indigo-strong) 48%, var(--color-heading) 52%);
}

.context-meter {
  width: 100%;
  height: 0.65rem;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent-border) 20%, transparent);
  overflow: hidden;
}
.context-meter-fill {
  height: 100%;
  border-radius: inherit;
  width: 0;
  transition: width .35s ease;
  background: var(--tone-indigo-strong);
}
.context-meter[data-tone="emerald"] .context-meter-fill { background: var(--tone-emerald-strong); }
.context-meter[data-tone="sky"] .context-meter-fill { background: var(--tone-sky-strong); }
.context-meter[data-tone="rose"] .context-meter-fill { background: var(--tone-rose-strong); }

.context-simulation-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}
.context-simulation-actions .btn-soft {
  flex: 1 1 180px;
}

.context-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  border-radius: 999px;
  border: 1px solid var(--accent-border);
  background: color-mix(in srgb, var(--accent-soft) 18%, var(--color-card) 82%);
  color: var(--color-heading);
  font-size: 0.75rem;
  padding: 0.25rem 0.85rem;
  transition: background .2s ease, color .2s ease, border-color .2s ease;
}
.context-indicator[data-tone="green"] {
  background: color-mix(in srgb, var(--tone-emerald-strong) 20%, var(--color-card) 80%);
  border-color: color-mix(in srgb, var(--tone-emerald-strong) 32%, var(--accent-border) 68%);
  color: color-mix(in srgb, var(--tone-emerald-strong) 55%, var(--color-heading) 45%);
}
.context-indicator[data-tone="purple"] {
  background: color-mix(in srgb, var(--tone-purple-strong) 20%, var(--color-card) 80%);
  border-color: color-mix(in srgb, var(--tone-purple-strong) 32%, var(--accent-border) 68%);
  color: color-mix(in srgb, var(--tone-purple-strong) 55%, var(--color-heading) 45%);
}
.context-indicator[data-tone="orange"],
.context-indicator[data-tone="amber"] {
  background: color-mix(in srgb, var(--tone-amber-strong) 20%, var(--color-card) 80%);
  border-color: color-mix(in srgb, var(--tone-amber-strong) 32%, var(--accent-border) 68%);
  color: color-mix(in srgb, var(--tone-amber-strong) 55%, var(--color-heading) 45%);
}
.context-indicator[data-tone="blue"],
.context-indicator[data-tone="sky"] {
  background: color-mix(in srgb, var(--tone-sky-strong) 20%, var(--color-card) 80%);
  border-color: color-mix(in srgb, var(--tone-sky-strong) 32%, var(--accent-border) 68%);
  color: color-mix(in srgb, var(--tone-sky-strong) 55%, var(--color-heading) 45%);
}

.context-truncation {
  margin-top: 0.75rem;
  padding-top: 0.65rem;
  border-top: 1px dashed color-mix(in srgb, var(--accent-border) 40%, transparent);
  font-size: 0.75rem;
  color: color-mix(in srgb, var(--tone-rose-strong) 55%, var(--color-secondary) 45%);
}

.context-empty {
  text-align: center;
  padding: 2rem 1rem;
  color: var(--color-secondary);
}
.context-empty-title {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 0.35rem;
  color: var(--color-heading);
}

.context-lorem {
  display: flex;
  gap: 0.75rem;
  align-items: center;
  flex-wrap: wrap;
}
.context-lorem-group {
  display: inline-flex;
  flex-direction: column;
  gap: 0.35rem;
}
