<section class="space-y-6" id="p01-explorer">
  <div class="grid md:grid-cols-2 gap-4">
    <div class="panel panel-info p-4 space-y-3">
      <div>
        <label for="p01-dimension" class="block text-sm font-medium text-heading">Embedding dimension <span id="p01-dimension-label" class="font-mono text-xs panel-muted">768</span></label>
        <input type="range" id="p01-dimension" min="32" max="2048" step="32" value="768" class="w-full">
      </div>
      <div>
        <label for="p01-corpus" class="block text-sm font-medium text-heading">Corpus size <span id="p01-corpus-label" class="font-mono text-xs panel-muted">1000 docs</span></label>
        <input type="range" id="p01-corpus" min="100" max="5000" step="100" value="1000" class="w-full">
      </div>
      <div>
        <label for="p01-k" class="block text-sm font-medium text-heading">Top-k requirement <span id="p01-k-label" class="font-mono text-xs panel-muted">k = 2</span></label>
        <input type="range" id="p01-k" min="1" max="10" step="1" value="2" class="w-full">
        <p class="text-xs panel-muted mt-1">LIMIT evaluates k = 2, but move the slider to see how the combinatorics explode.</p>
      </div>
    </div>
    <div class="panel panel-neutral p-4 space-y-3">
      <h4 class="text-sm font-semibold text-heading">Design tweaks</h4>
      <div>
        <label for="p01-vectors" class="block text-sm font-medium text-heading">Vectors per document <span id="p01-vectors-label" class="font-mono text-xs panel-muted">1</span></label>
        <input type="range" id="p01-vectors" min="1" max="8" step="1" value="1" class="w-full">
        <p class="text-xs panel-muted mt-1">Multiple vectors approximate chunked passages or field-specific embeddings.</p>
      </div>
      <div class="flex items-center gap-2">
        <input type="checkbox" id="p01-reranker" class="h-4 w-4 rounded border border-divider bg-card accent-[color:var(--accent-strong)]">
        <label for="p01-reranker" class="text-sm text-body">Add lightweight lexical reranker <span class="text-xs panel-muted">(+15% coverage)</span></label>
      </div>
      <p class="text-xs panel-muted">A lexical reranker is a second-pass scorer that rechecks the top candidates with keyword features (BM25, sparse embeddings, metadata rules). It can rescue hits that the pure embedding ranker missed.</p>
      <div>
        <label for="p01-retention" class="block text-sm font-medium text-heading">Token retention <span id="p01-retention-label" class="font-mono text-xs panel-muted">100%</span></label>
        <input type="range" id="p01-retention" min="35" max="100" step="5" value="100" class="w-full">
        <p class="text-xs panel-muted mt-1">Aggressive truncation lowers the effective embedding dimension. We approximate that here.</p>
      </div>
      <p class="text-xs text-body">Effective dimension: <span id="p01-effective-label" class="font-mono text-sm text-info">768</span></p>
    </div>
  </div>

  <div class="panel panel-neutral p-4 space-y-4">
    <div class="flex items-center justify-between">
      <h4 class="text-sm font-semibold text-heading">Coverage outlook</h4>
      <span id="p01-coverage-percent" class="text-lg font-semibold text-info">0%</span>
    </div>
    <div class="h-2 rounded-full bg-subtle overflow-hidden">
      <div id="p01-coverage-bar" class="h-full rounded-full transition-all duration-300" style="width:0%"></div>
    </div>
    <p id="p01-coverage-note" class="text-xs panel-muted">Adjust the sliders to explore when capacity collapse happens.</p>
    <dl class="grid sm:grid-cols-3 gap-3 text-xs text-body">
      <div class="panel panel-neutral-soft p-3 space-y-1">
        <dt class="font-semibold text-heading text-xs uppercase tracking-wide">Single vector</dt>
        <dd id="p01-coverage-single" class="text-sm font-semibold text-info">0%</dd>
      </div>
      <div class="panel panel-neutral-soft p-3 space-y-1">
        <dt class="font-semibold text-heading text-xs uppercase tracking-wide">Multi-vector</dt>
        <dd id="p01-coverage-multi" class="text-sm font-semibold text-info">0%</dd>
      </div>
      <div class="panel panel-neutral-soft p-3 space-y-1">
        <dt class="font-semibold text-heading text-xs uppercase tracking-wide">+ Reranker boost</dt>
        <dd id="p01-coverage-reranker" class="text-sm font-semibold text-info">0%</dd>
      </div>
    </dl>
  </div>

  <div class="grid md:grid-cols-2 gap-4">
    <div class="panel panel-neutral p-4 space-y-3">
      <h4 class="text-sm font-semibold text-heading">Representable top-k sets</h4>
      <div id="p01-representable" class="text-2xl font-mono text-info">0</div>
      <p class="text-xs panel-muted">Upper bound assuming the effective dimension above. Inspired by the paper's hyperplane argument.</p>
    </div>
    <div class="panel panel-neutral p-4 space-y-3">
      <h4 class="text-sm font-semibold text-heading">All possible top-k sets</h4>
      <div id="p01-total" class="text-2xl font-mono text-heading">0</div>
      <p class="text-xs panel-muted">Combinatorial ceiling \({n \choose k}\). When this number dwarfs the representable bound, recall must fail.</p>
    </div>
  </div>

  <div class="panel panel-warning p-4" id="p01-insight"></div>

  <div class="panel panel-neutral p-5 space-y-4" id="p01-simulator">
    <div class="flex items-center justify-between">
      <h4 class="text-sm font-semibold text-heading">LIMIT-style stress simulator</h4>
      <button id="p01-sim-run" class="btn-accent text-xs font-medium" data-accent="foundations">Run roll-up</button>
    </div>
    <p class="text-xs panel-muted">Pick a retrieval scenario and simulate how often the boosted design actually finds the key documents. Each row represents a real-life query you might care about.</p>
    <div class="grid md:grid-cols-2 gap-3">
      <div>
        <label for="p01-sim-scenario" class="block text-sm font-medium text-heading">Scenario</label>
        <select id="p01-sim-scenario" class="mt-1 w-full rounded border border-divider bg-card px-2 py-1 text-sm text-body focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-[color:var(--accent-strong)]"></select>
      </div>
      <div>
        <label for="p01-sim-queries" class="block text-sm font-medium text-heading">Number of sampled queries <span id="p01-sim-queries-label" class="font-mono text-xs panel-muted">10</span></label>
        <input type="range" id="p01-sim-queries" min="5" max="30" step="1" value="10" class="w-full">
      </div>
    </div>
    <p id="p01-sim-scenario-desc" class="text-xs panel-muted"></p>
    <div id="p01-sim-summary" class="text-sm font-medium text-body">Run the simulator to see recall variance.</div>
    <div id="p01-sim-table" class="grid gap-2 text-xs"></div>
  </div>
</section>
