<div class="space-y-6">
  <!-- Mode picker -->
  <div class="question-card space-y-3">
    <div class="flex items-start justify-between gap-3">
      <div>
        <h4 class="font-medium text-heading">üß≠ Choose an embedding exploration mode</h4>
        <p class="small-caption text-muted">Each mode highlights a different property of vector spaces‚Äîsemantic neighbours, arithmetic analogies, or contextual shifts.</p>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
      <label class="question-strategy" data-tone="sky">
        <input type="radio" name="q7-viz-type" value="similarity" checked>
        <div class="stacked-card space-y-2">
          <div class="flex items-center justify-between gap-2">
            <span class="font-medium text-heading">Semantic similarity</span>
            <span class="chip chip-info text-xs">Default</span>
          </div>
          <p class="small-caption text-muted">Cluster words that share meaning to see how proximity captures semantics.</p>
        </div>
      </label>

      <label class="question-strategy" data-tone="purple">
        <input type="radio" name="q7-viz-type" value="arithmetic">
        <div class="stacked-card space-y-2">
          <div class="flex items-center justify-between gap-2">
            <span class="font-medium text-heading">Vector arithmetic</span>
            <span class="chip chip-accent text-xs">Analogy</span>
          </div>
          <p class="small-caption text-muted">Play with A ‚àí B + C style analogies (illustrative for classic word2vec behaviour).</p>
        </div>
      </label>

      <label class="question-strategy" data-tone="emerald">
        <input type="radio" name="q7-viz-type" value="context">
        <div class="stacked-card space-y-2">
          <div class="flex items-center justify-between gap-2">
            <span class="font-medium text-heading">Context comparison</span>
            <span class="chip chip-success text-xs">Polysemy</span>
          </div>
          <p class="small-caption text-muted">Contrast how the same word shifts when the surrounding context changes.</p>
        </div>
      </label>
    </div>
  </div>

  <!-- Quick actions -->
  <div class="question-card flex flex-wrap items-center gap-3">
    <span class="text-sm font-medium text-heading">‚öôÔ∏è Quick experiments</span>
    <button id="q7-example-btn" class="btn-soft text-xs">Try a curated scenario</button>
    <button id="q7-random-btn" class="btn-soft text-xs">üé≤ Random word</button>
  </div>

  <!-- Similarity explorer -->
  <div id="q7-similarity-panel" class="question-card space-y-4">
    <div class="flex items-center justify-between gap-3">
      <h4 class="font-medium text-heading">üîç Semantic similarity explorer</h4>
      <span class="chip chip-info text-xs">Cosine neighbours</span>
    </div>
    <div class="grid md:grid-cols-2 gap-6">
      <div class="space-y-3">
        <label for="q7-query-word" class="block text-sm font-medium text-heading">Focus word</label>
        <select id="q7-query-word" class="field-select">
          <option value="king">king</option>
          <option value="queen">queen</option>
          <option value="cat">cat</option>
          <option value="dog">dog</option>
          <option value="happy">happy</option>
          <option value="sad">sad</option>
          <option value="france">france</option>
          <option value="germany">germany</option>
          <option value="computer">computer</option>
          <option value="programming">programming</option>
          <option value="walk">walk</option>
          <option value="run">run</option>
        </select>
        <p class="small-caption text-muted">Pick any token in the demo vocabulary to see its nearest neighbours.</p>
        <div class="panel panel-neutral-soft p-3 small-caption">
          Tip: Production search typically embeds both the user query and documents, then ranks by cosine similarity.
        </div>
      </div>
      <div>
        <div class="panel panel-neutral-soft p-3">
          <h5 class="font-medium text-heading mb-2">Closest vectors</h5>
          <div id="q7-similarity-results" class="space-y-2 text-sm"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Vector arithmetic -->
  <div id="q7-arithmetic-panel" class="question-card space-y-4 hidden">
    <div class="flex items-center justify-between gap-3">
      <h4 class="font-medium text-heading">üî¢ Vector arithmetic playground</h4>
      <span class="chip chip-accent text-xs">A ‚àí B + C</span>
    </div>
    <div class="grid md:grid-cols-4 gap-4">
      <div class="space-y-2">
        <label for="q7-word-a" class="block text-sm font-medium text-heading">Word A</label>
        <select id="q7-word-a" class="field-select">
          <option value="king">king</option>
          <option value="queen">queen</option>
          <option value="man">man</option>
          <option value="woman">woman</option>
          <option value="paris">paris</option>
          <option value="berlin">berlin</option>
          <option value="run">run</option>
          <option value="walk">walk</option>
        </select>
      </div>
      <div class="space-y-2">
        <label for="q7-word-b" class="block text-sm font-medium text-heading">Minus word B</label>
        <select id="q7-word-b" class="field-select">
          <option value="man">man</option>
          <option value="woman">woman</option>
          <option value="queen">queen</option>
          <option value="king">king</option>
          <option value="paris">paris</option>
          <option value="berlin">berlin</option>
          <option value="run">run</option>
          <option value="walk">walk</option>
        </select>
      </div>
      <div class="space-y-2">
        <label for="q7-word-c" class="block text-sm font-medium text-heading">Plus word C</label>
        <select id="q7-word-c" class="field-select">
          <option value="woman">woman</option>
          <option value="man">man</option>
          <option value="queen">queen</option>
          <option value="king">king</option>
          <option value="berlin">berlin</option>
          <option value="paris">paris</option>
          <option value="run">run</option>
          <option value="walk">walk</option>
        </select>
      </div>
      <div class="flex items-end">
        <button id="q7-calculate-btn" class="btn-soft w-full">Calculate result</button>
      </div>
    </div>
    <div id="q7-arithmetic-result" class="panel panel-neutral-soft p-4 text-sm text-center">
      Choose A ‚àí B + C, then calculate to see the nearest embedding.
    </div>
  </div>

  <!-- Context comparison -->
  <div id="q7-context-panel" class="question-card space-y-4 hidden">
    <div class="flex items-center justify-between gap-3">
      <h4 class="font-medium text-heading">üìù Contextual embedding comparison</h4>
      <span class="chip chip-success text-xs">Polysemous words</span>
    </div>
    <div class="space-y-4">
      <div class="space-y-2">
        <label for="q7-context-word" class="block text-sm font-medium text-heading">Select a word with multiple senses</label>
        <select id="q7-context-word" class="field-select">
          <option value="bank">bank (financial vs river)</option>
          <option value="bark">bark (dog vs tree)</option>
          <option value="bat">bat (animal vs sports)</option>
          <option value="light">light (illumination vs weight)</option>
          <option value="fair">fair (just vs carnival)</option>
        </select>
      </div>
      <div class="grid md:grid-cols-2 gap-4">
        <div class="panel panel-info p-4 space-y-3">
          <div class="flex items-center justify-between gap-2">
            <h6 class="font-medium text-heading">Context A</h6>
            <span class="chip chip-info text-xs">First sense</span>
          </div>
          <div id="q7-context-a" class="panel panel-neutral p-3 font-mono text-sm"></div>
          <div class="small-caption text-muted">
            <strong>Embedding neighbours:</strong>
            <div id="q7-context-a-neighbors" class="mt-1"></div>
          </div>
        </div>
        <div class="panel panel-success p-4 space-y-3">
          <div class="flex items-center justify-between gap-2">
            <h6 class="font-medium text-heading">Context B</h6>
            <span class="chip chip-success text-xs">Second sense</span>
          </div>
          <div id="q7-context-b" class="panel panel-neutral p-3 font-mono text-sm"></div>
          <div class="small-caption text-muted">
            <strong>Embedding neighbours:</strong>
            <div id="q7-context-b-neighbors" class="mt-1"></div>
          </div>
        </div>
      </div>
      <div class="panel panel-warning p-3 small-caption">
        <strong>Cosine similarity:</strong>
        <span id="q7-context-similarity" class="font-mono">0.230</span>
        <span class="ml-2">Lower similarity = meanings drift further apart.</span>
      </div>
    </div>
  </div>

  <!-- Embedding visualization -->
  <div class="question-card space-y-3">
    <div class="flex items-center justify-between gap-3">
      <h4 class="font-medium text-heading">üé® 2D embedding visualization</h4>
      <span class="chip chip-neutral text-xs">512D ‚Üí 2D (t-SNE)</span>
    </div>
    <div class="panel panel-neutral-soft p-4">
      <div id="q7-embedding-space" class="relative h-80 rounded-lg border border-dashed border-divider overflow-hidden">
        <svg id="q7-svg-space" class="w-full h-full" role="img" aria-label="Embedding scatter plot"></svg>
        <div id="q7-hover-tooltip" class="absolute pointer-events-none text-xs px-2 py-1 rounded shadow-sm opacity-0 transition-opacity" style="background: var(--color-heading); color: var(--color-card);">
          Word info
        </div>
      </div>
      <div id="q7-embedding-legend" class="mt-3 flex flex-wrap gap-4 text-xs text-muted">
        <div class="legend-dot" style="--legend-color: var(--tone-sky-strong);">Query word</div>
        <div class="legend-dot" style="--legend-color: var(--tone-emerald-strong);">Similar words</div>
        <div class="legend-dot" style="--legend-color: color-mix(in srgb, var(--color-muted) 50%, transparent);">Other words</div>
      </div>
    </div>
  </div>

  <!-- Explanation -->
  <div class="panel panel-warning p-4 space-y-2">
    <h4 class="font-medium text-heading">üß† Understanding embeddings</h4>
    <div id="q7-explanation" class="text-sm">
      Embeddings map tokens into high-dimensional vectors where semantic similarity emerges as geometric proximity. Toggle the modes above to see how we probe those spaces for meaning.
    </div>
  </div>
</div>
