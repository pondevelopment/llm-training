<div class="space-y-6">
  <div class="question-card space-y-3">
    <label for="q29-dist-type" class="text-sm font-medium text-heading">ðŸ“ˆ Choose distribution scenario</label>
    <select id="q29-dist-type" aria-describedby="q29-dist-type-desc" class="field-select w-full">
      <option value="teacher-student" selected>Teacher-Student Distillation</option>
      <option value="rlhf-drift">RLHF Policy Drift</option>
      <option value="fine-tuning">Fine-tuning Regularisation</option>
      <option value="custom">Custom Distributions</option>
    </select>
    <p id="q29-dist-type-desc" class="small-caption text-muted">Different scenarios show how KL divergence guides LLM training decisions.</p>
  </div>

  <div class="question-card space-y-4">
    <h4 class="font-semibold text-heading">Tune the distributions</h4>
    <div class="grid md:grid-cols-2 gap-4">
      <div class="panel panel-neutral p-4 space-y-3">
        <label for="q29-dist-p" class="text-sm font-medium text-heading">ðŸŽ¯ Target distribution P</label>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-xs text-muted w-16">Peak</span>
            <input type="range" id="q29-p-peak" min="0" max="10" value="5" step="0.1" class="flex-1">
            <span id="q29-p-peak-val" class="text-xs text-muted w-10 text-right">5.0</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-xs text-muted w-16">Width</span>
            <input type="range" id="q29-p-width" min="0.5" max="3" value="1" step="0.1" class="flex-1">
            <span id="q29-p-width-val" class="text-xs text-muted w-10 text-right">1.0</span>
          </div>
        </div>
        <p class="small-caption text-muted">Represents the true / teacher / reference distribution.</p>
      </div>
      <div class="panel panel-neutral p-4 space-y-3">
        <label for="q29-dist-q" class="text-sm font-medium text-heading">ðŸ§ª Approximating distribution Q</label>
        <div class="space-y-2">
          <div class="flex items-center gap-2">
            <span class="text-xs text-muted w-16">Peak</span>
            <input type="range" id="q29-q-peak" min="0" max="10" value="4.5" step="0.1" class="flex-1">
            <span id="q29-q-peak-val" class="text-xs text-muted w-10 text-right">4.5</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-xs text-muted w-16">Width</span>
            <input type="range" id="q29-q-width" min="0.5" max="3" value="1.2" step="0.1" class="flex-1">
            <span id="q29-q-width-val" class="text-xs text-muted w-10 text-right">1.2</span>
          </div>
        </div>
        <p class="small-caption text-muted">Represents the student / policy / model distribution.</p>
      </div>
    </div>
  </div>

  <div class="question-card space-y-3">
    <h4 class="font-semibold text-heading">Choose analysis mode</h4>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
      <label class="mode-card panel panel-neutral-soft p-3 space-y-2" data-mode="forward">
        <input type="radio" name="q29-mode" value="forward" checked class="sr-only">
        <div class="flex items-center justify-between gap-2">
          <span class="font-medium text-heading">Forward KL</span>
          <span class="chip chip-info text-xs">D(Pâ€–Q)</span>
        </div>
        <p class="small-caption text-muted">Mean-seeking: Q covers all of P's mass.</p>
      </label>
      <label class="mode-card panel panel-neutral-soft p-3 space-y-2" data-mode="reverse">
        <input type="radio" name="q29-mode" value="reverse" class="sr-only">
        <div class="flex items-center justify-between gap-2">
          <span class="font-medium text-heading">Reverse KL</span>
          <span class="chip chip-accent text-xs">D(Qâ€–P)</span>
        </div>
        <p class="small-caption text-muted">Mode-seeking: Q focuses on P's peaks.</p>
      </label>
      <label class="mode-card panel panel-neutral-soft p-3 space-y-2" data-mode="symmetric">
        <input type="radio" name="q29-mode" value="symmetric" class="sr-only">
        <div class="flex items-center justify-between gap-2">
          <span class="font-medium text-heading">Jensen-Shannon</span>
          <span class="chip chip-success text-xs">JS(P,Q)</span>
        </div>
        <p class="small-caption text-muted">Symmetric: balances both directions.</p>
      </label>
    </div>
  </div>

  <div class="question-card space-y-2">
    <label for="q29-scenario-select" class="text-sm font-medium text-heading">ðŸ’¡ Quick scenarios</label>
    <select id="q29-scenario-select" class="field-select w-full">
      <option value="">Choose a scenarioâ€¦</option>
      <option value="perfect-match">Perfect Match</option>
      <option value="student-underfits">Student Underfits</option>
      <option value="policy-drift">Policy Drift</option>
      <option value="mode-collapse">Mode Collapse</option>
    </select>
    <p class="small-caption text-muted">Loads preset distributions and KL modes for common training situations.</p>
  </div>

  <div class="question-card space-y-4">
    <div class="flex items-center justify-between gap-2">
      <h4 class="font-medium text-heading">ðŸ“Š KL divergence analysis</h4>
      <div id="q29-mode-indicator" class="chip chip-info text-xs">Forward KL: D(Pâ€–Q)</div>
    </div>
    <div id="q29-output" class="min-h-[300px] panel panel-neutral-soft p-4" aria-live="polite" aria-atomic="true"></div>
    <div id="q29-legend" class="small-caption text-muted" aria-live="polite"></div>
  </div>

  <div class="panel panel-warning p-4 space-y-2">
    <h4 class="font-medium text-heading">ðŸ§® Mathematical insight</h4>
    <div id="q29-explanation" class="text-sm" aria-live="polite"></div>
  </div>
</div>
