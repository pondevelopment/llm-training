<div class="space-y-8">
        <!-- Interactive Controls -->
    <div class="bg-white p-4 rounded-lg border border-gray-200 space-y-4" id="q32-controls">
            <h4 class="font-medium text-gray-900">üõ†Ô∏è Experiment Controls</h4>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <label class="block">
                        <span class="text-xs font-medium text-gray-700">Sequence Length: <span id="q32-seq-length-display" class="font-mono">3</span></span>
                        <input id="q32-seq-length" type="range" min="2" max="8" value="3" class="w-full mt-1" aria-label="Sequence length slider" />
                        <div id="q32-seq-feedback" class="text-xs text-gray-600 mt-1"></div>
                    </label>
                    <label class="block">
                        <span class="text-xs font-medium text-gray-700">Key / Value Dimension (d_k): <span id="q32-dim-k-display" class="font-mono">4</span></span>
                        <input id="q32-dim-k" type="range" min="2" max="12" value="4" class="w-full mt-1" aria-label="Key dimension slider" />
                        <div id="q32-dim-feedback" class="text-xs text-gray-600 mt-1"></div>
                    </label>
                    <label class="block">
                        <span class="text-xs font-medium text-gray-700">Temperature: <span id="q32-temperature-display" class="font-mono">1.0</span></span>
                        <input id="q32-temperature" type="range" min="0.2" max="3" step="0.1" value="1" class="w-full mt-1" aria-label="Temperature slider" />
                        <div id="q32-temp-feedback" class="text-xs text-gray-600 mt-1"></div>
                    </label>
                    <label class="inline-flex items-center space-x-2 mt-2">
                        <input id="q32-scaling" type="checkbox" checked aria-label="Toggle scaling by square root d k" />
                        <span class="text-xs text-gray-700">Apply ‚àöd_k scaling</span>
                    </label>
                    <div id="q32-scaling-feedback" class="text-xs text-gray-600 mt-1"></div>
                </div>
                <div class="space-y-3">
                    <div class="text-xs font-medium text-gray-700">Presets</div>
                    <div class="flex flex-wrap gap-2">
                        <button id="q32-beginner" class="px-2 py-1 text-xs rounded bg-blue-50 border border-blue-200 hover:bg-blue-100">Beginner</button>
                        <button id="q32-realistic" class="px-2 py-1 text-xs rounded bg-green-50 border border-green-200 hover:bg-green-100">Realistic</button>
                        <button id="q32-focused" class="px-2 py-1 text-xs rounded bg-orange-50 border border-orange-200 hover:bg-orange-100">Focused</button>
                        <button id="q32-distributed" class="px-2 py-1 text-xs rounded bg-purple-50 border border-purple-200 hover:bg-purple-100">Distributed</button>
                    </div>
                    <div class="mt-4 space-y-2">
                        <button id="q32-toggle-guide" class="text-xs underline text-blue-700">Hide Guide</button>
                        <div id="q32-guide-content" class="mt-2 text-xs text-gray-600 space-y-2">
                            <p><strong>Sequence Length</strong> changes how many tokens attend to each other (matrix size).</p>
                            <p><strong>d_k</strong> changes scale of dot products; higher values make scaling more important.</p>
                            <p><strong>Temperature</strong> sharpens (low) or smooths (high) the softmax distribution.</p>
                            <p><strong>Scaling</strong> by ‚àöd_k stabilizes training by keeping softmax in a sensitive range.</p>
                        </div>
                        <div class="flex flex-wrap items-center gap-3 pt-2 border-t border-gray-200">
                            <label class="text-xs text-gray-700 flex items-center gap-1">Palette
                                <select id="q32-palette" class="text-xs border-gray-300 rounded px-1 py-0.5">
                                    <option value="default">Blue‚ÜíRed</option>
                                    <option value="viridis">Viridis</option>
                                </select>
                            </label>
                            <button id="q32-regenerate" class="text-xs px-2 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700">Regenerate Matrices</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Visualization Mode Selection -->
            <div class="bg-white border border-gray-200 rounded-lg p-4" id="q32-mode-wrapper">
                <fieldset>
                  <legend class="font-medium text-gray-700 mb-3">üëÄ Visualization Mode</legend>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-3" role="radiogroup" aria-label="Attention visualization mode">
                    <label class="relative border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-50 transition-all duration-200" data-mode-card>
                        <input type="radio" name="q32-mode" value="step-by-step" checked class="absolute top-3 right-3" aria-label="Step by step mode">
                        <div class="visualization-option">
                            <div class="flex items-center mb-3">
                                <span class="text-2xl mr-3">üìö</span>
                                <div>
                                    <div class="font-medium text-gray-900">Step-by-Step</div>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Best for Learning</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">See every calculation step with detailed explanations</p>
                            <div class="text-xs font-mono bg-gray-100 px-2 py-1 rounded">
                                Q¬∑K^T ‚Üí ‚àöd_k ‚Üí Softmax ‚Üí ¬∑V
                            </div>
                        </div>
                    </label>
                    <label class="relative border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-50 transition-all duration-200" data-mode-card>
                        <input type="radio" name="q32-mode" value="heatmap" class="absolute top-3 right-3" aria-label="Heatmap mode">
                        <div class="visualization-option">
                            <div class="flex items-center mb-3">
                                <span class="text-2xl mr-3">üé®</span>
                                <div>
                                    <div class="font-medium text-gray-900">Attention Heatmap</div>
                                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Most Visual</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Color-coded matrix showing attention patterns</p>
                            <div class="flex items-center text-xs">
                                <div class="w-3 h-3 bg-red-400 rounded mr-1"></div>
                                <span class="mr-2">High</span>
                                <div class="w-3 h-3 bg-blue-400 rounded mr-1"></div>
                                <span>Low</span>
                            </div>
                        </div>
                    </label>
                    <label class="relative border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-50 transition-all duration-200" data-mode-card>
                        <input type="radio" name="q32-mode" value="comparison" class="absolute top-3 right-3" aria-label="Scaling comparison mode">
                        <div class="visualization-option">
                            <div class="flex items-center mb-3">
                                <span class="text-2xl mr-3">‚öñÔ∏è</span>
                                <div>
                                    <div class="font-medium text-gray-900">Scaling Comparison</div>
                                    <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">Advanced</span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Side-by-side: with vs without ‚àöd_k scaling</p>
                            <div class="text-xs font-mono bg-gray-100 px-2 py-1 rounded">
                                Before vs After scaling
                            </div>
                        </div>
                    </label>
                  </div>
                </fieldset>
            </div>
            
            <!-- Results Section -->
            <div class="bg-white border border-gray-200 rounded-lg p-4">
                <div class="flex items-center justify-between mb-3">
                    <h4 class="font-medium text-gray-900">üé® Attention Computation</h4>
                    <div id="q32-mode-indicator" class="text-xs bg-gray-100 px-2 py-1 rounded font-medium"></div>
                </div>
                <div id="q32-output" class="min-h-[200px]" role="region" aria-live="polite" aria-label="Attention visualization output" aria-atomic="false"></div>
                <div id="q32-cell-detail" class="hidden mt-4 text-xs bg-gray-50 border border-gray-200 rounded p-3" aria-live="polite" aria-label="Selected attention cell details"></div>
            </div>
            
            <!-- Educational Analysis -->
            <div id="q32-analysis" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4" role="region" aria-live="polite" aria-label="Attention analysis panel" aria-atomic="false">
                <h4 class="font-medium text-yellow-900 mb-2" id="q32-analysis-heading">üìä Attention Analysis</h4>
                <div id="q32-explanation" class="text-sm text-yellow-800" aria-describedby="q32-analysis-heading"></div>
                <div id="q32-sr-summary" class="sr-only" aria-live="polite"></div>
            </div>
    </div>
