
<div class="space-y-6" id="q42-interactive-root">
  <div class="panel panel-info p-4 space-y-4">
    <div class="flex flex-wrap items-center gap-2 text-xs">
      <span class="font-semibold text-heading">Presets:</span>
      <button type="button" data-preset="balanced" class="chip chip-info text-xs cursor-pointer q42-preset">Balanced</button>
      <button type="button" data-preset="aggressive" class="chip chip-info text-xs cursor-pointer q42-preset">Aggressive tails</button>
      <button type="button" data-preset="widehead" class="chip chip-info text-xs cursor-pointer q42-preset">Wide head</button>
      <button type="button" data-preset="compression" class="chip chip-info text-xs cursor-pointer q42-preset">High compression</button>
      <button type="button" id="q42-adv-toggle" class="chip chip-neutral text-xs cursor-pointer q42-advanced-toggle" aria-expanded="false">Show advanced ‚ñæ</button>
    </div>
    <div class="flex flex-wrap items-center gap-2 text-xs">
      <label class="flex items-center gap-2 text-xs panel-muted">
        <input id="q42-baseline" type="checkbox" class="accent-current scale-90">
        <span>Baseline overlay</span>
      </label>
      <div class="flex-1"></div>
      <button type="button" id="q42-copy" class="chip chip-neutral text-xs cursor-pointer">Copy link</button>
      <button type="button" id="q42-export" class="chip chip-neutral text-xs cursor-pointer">Export</button>
      <button type="button" id="q42-reset" class="chip chip-accent text-xs cursor-pointer">Reset</button>
    </div>
    <div class="grid md:grid-cols-5 gap-4 text-xs">
      <div class="space-y-2">
        <label class="flex items-center gap-2 text-sm font-semibold text-heading">Vocab size V <span class="text-accent cursor-help" title="Total vocabulary size used for full softmax baseline.">?</span></label>
        <select id="q42-vocab" class="q9-select text-xs">
          <option value="50000" selected>50k</option>
          <option value="100000">100k</option>
        </select>
      </div>
      <div class="space-y-2">
        <label class="flex items-center gap-2 text-sm font-semibold text-heading">Zipf exponent s <span class="text-accent cursor-help" title="Higher s = steeper frequency drop; more mass concentrated in head.">?</span></label>
        <input id="q42-zipf" type="range" min="1.00" max="1.20" step="0.01" value="1.08" class="w-full q42-slider">
        <div class="text-center text-xs panel-muted">s=<span id="q42-zipf-val" class="font-mono text-heading">1.08</span></div>
      </div>
      <div class="space-y-2">
        <label class="flex items-center gap-2 text-sm font-semibold text-heading">Bucket cutoffs <span class="text-accent cursor-help" title="Defines head, tail 1, tail 2 boundaries by rank (inclusive).">?</span></label>
        <select id="q42-cutoffs" class="q9-select text-xs">
          <option value="5000,20000">5k, 20k</option>
          <option value="8000,25000">8k, 25k</option>
          <option value="10000,30000" selected>10k, 30k</option>
          <option value="15000,45000">15k, 45k</option>
          <option value="15000,50000">15k, 50k</option>
          <option value="20000,60000">20k, 60k</option>
        </select>
        <p class="small-caption panel-muted">Example: 10k, 30k ‚Üí head = [1..10k], tail 1 = (10k..30k], tail 2 = (30k..V]</p>
      </div>
      <div id="q42-adv-1" class="hidden space-y-2">
        <label class="flex items-center gap-2 text-sm font-semibold text-heading">Tail shrink (Œ±) <span class="text-accent cursor-help" title="Tails use lower projection dims: d_i = Œ±_i ¬∑ d.">?</span></label>
        <select id="q42-alphas" class="q9-select text-xs">
          <option value="0.75,0.50">(0.75, 0.50)</option>
          <option value="0.50,0.25" selected>(0.50, 0.25)</option>
          <option value="0.50,0.125">(0.50, 0.125)</option>
          <option value="0.35,0.15">(0.35, 0.15)</option>
        </select>
        <div id="q42-alpha-detail" class="small-caption panel-muted"></div>
      </div>
      <div id="q42-adv-2" class="hidden space-y-2">
        <label class="flex items-center gap-2 text-sm font-semibold text-heading">Hidden dim d <span class="text-accent cursor-help" title="Base hidden dimension before projection.">?</span></label>
        <select id="q42-dim" class="q9-select text-xs">
          <option value="512">512</option>
          <option value="768">768</option>
          <option value="1024" selected>1024</option>
          <option value="1536">1536</option>
          <option value="2048">2048</option>
        </select>
      </div>
    </div>
    <p class="small-caption panel-muted"><strong>Tip:</strong> Start with presets. Use ‚ÄúShow advanced‚Äù for Œ± &amp; d tuning. Toggle the baseline overlay to visualize the full softmax reference.</p>
  </div>

  <div class="panel panel-neutral p-4 space-y-3">
    <h5 class="font-semibold text-heading text-sm">üìà Adaptive Softmax vs Baseline</h5>
    <div id="q42-results" class="text-xs space-y-1" aria-live="polite"></div>
    <div id="q42-metrics" class="q42-metric-stack space-y-3 text-xs"></div>
  </div>

  <div class="panel panel-neutral p-4 space-y-3">
    <div class="flex items-center justify-between">
      <h5 class="font-semibold text-heading text-sm">üß± Bucket Coverage</h5>
      <span id="q42-spark-legend" class="text-xs panel-muted"></span>
    </div>
    <div id="q42-coverage" class="q42-meter-group text-xs space-y-2" aria-live="polite"></div>
    <div class="space-y-3">
      <div id="q42-spark" class="q42-spark h-16 rounded-lg overflow-hidden"></div>
      <div class="q42-spark-key">
        <span class="q42-spark-chip" data-spark-chip="head">Head ranks</span>
        <span class="q42-spark-chip" data-spark-chip="tail1">Tail 1 ranks</span>
        <span class="q42-spark-chip" data-spark-chip="tail2">Tail 2 ranks</span>
      </div>
      <div id="q42-spark-info" class="q42-spark-info text-xs"></div>
    </div>
  </div>

  <div class="panel panel-info p-4 space-y-2">
    <h5 class="font-semibold text-heading text-sm">üîç Explanation</h5>
    <div id="q42-explain" class="text-xs space-y-2" aria-live="polite"></div>
  </div>

  <div class="panel panel-neutral p-4 space-y-3">
    <div class="flex flex-wrap items-center gap-2">
      <h5 class="font-semibold text-heading text-sm flex-1">üóÇÔ∏è Scenario Compare</h5>
      <button id="q42-freeze" type="button" class="chip chip-info text-xs cursor-pointer">Freeze current</button>
      <button id="q42-clear" type="button" class="chip chip-neutral text-xs cursor-pointer">Clear</button>
    </div>
    <div id="q42-compare" class="text-xs space-y-2"></div>
    <div id="q42-sensitivity" class="text-xs panel-muted"></div>
  </div>
</div>


