
      <div class="space-y-6">
        <div class="bg-gradient-to-r from-sky-50 to-indigo-50 p-4 rounded-lg border border-sky-200">
          <div class="flex flex-wrap items-center gap-2 mb-3 text-xs">
            <span class="font-semibold text-gray-700 mr-1">Presets:</span>
            <button data-q43-preset="stable-mid" class="px-2 py-0.5 rounded border border-sky-300 bg-white hover:bg-sky-100">Stable mid (L=12,g=0.92,Î±=0.5,Pre,off)</button>
            <button data-q43-preset="deep" class="px-2 py-0.5 rounded border border-sky-300 bg-white hover:bg-sky-100">Deep stack (L=36,g=0.95,Î±=0.6,Pre,hop=4)</button>
            <button data-q43-preset="risk" class="px-2 py-0.5 rounded border border-sky-300 bg-white hover:bg-sky-100">Risky (L=24,g=1.12,Î±=0.8,Post,off)</button>
            <button id="q43-copy" class="px-2 py-0.5 rounded border border-sky-400 bg-white hover:bg-sky-100 text-sky-700">Copy link</button>
            <button id="q43-export" class="px-2 py-0.5 rounded border border-sky-400 bg-white hover:bg-sky-100 text-sky-700">Export</button>
          </div>
          <div class="grid md:grid-cols-5 gap-4 text-xs">
            <div>
              <label class="font-semibold text-gray-700" title="Number of stacked transformer blocks">Depth L</label>
              <input id="q43-depth" type="range" min="4" max="48" step="1" value="12" class="w-full" />
              <div class="text-center mt-1"><span id="q43-depth-val" class="font-mono">12</span></div>
            </div>
            <div>
              <label class="font-semibold text-gray-700" title="Underlying per-layer multiplicative effect without residual/normalization">Base gain g</label>
              <input id="q43-gain" type="range" min="0.70" max="1.20" step="0.01" value="0.92" class="w-full" />
              <div class="text-center mt-1"><span id="q43-gain-val" class="font-mono">0.92</span></div>
            </div>
            <div>
              <label class="font-semibold text-gray-700" title="Scaling applied to transformed branch before addition">Residual weight Î±</label>
              <input id="q43-res" type="range" min="0.00" max="1.00" step="0.05" value="0.5" class="w-full" />
              <div class="text-center mt-1"><span id="q43-res-val" class="font-mono">0.50</span></div>
            </div>
            <div>
              <label class="font-semibold text-gray-700" title="Placement of LayerNorm relative to sublayer">Normalization</label>
              <select id="q43-norm" class="w-full border rounded p-1 text-xs">
                <option value="none">None</option>
                <option value="post">Post-LN</option>
                <option value="pre" selected>Pre-LN</option>
              </select>
            </div>
            <div>
              <label class="font-semibold text-gray-700" title="Models attention creating shorter dependency paths">Attention shortcut</label>
              <select id="q43-shortcut" class="w-full border rounded p-1 text-xs">
                <option value="0" selected>Off</option>
                <option value="4">On (effective hop = 4)</option>
                <option value="2">On (effective hop = 2)</option>
              </select>
            </div>
          </div>
          <p class="text-xs text-gray-600 mt-2">We simulate gradient magnitude from top (layer L) to bottom (layer 1). Residual adds an identity path; Pre-LN pulls gains toward 1. Attention shortcut reduces effective hops for part of the gradient.</p>
          <p class="text-xs text-gray-500">Legend: <span class="text-rose-600">rose</span> = baseline (no residual/LN/shortcut), <span class="text-emerald-600">emerald</span> = transformer-style stabilized path.</p>
        </div>

        <div class="grid md:grid-cols-3 gap-4">
          <div class="bg-white border rounded-lg p-4">
            <h5 class="font-semibold text-gray-800 mb-2">ðŸ“ˆ Gradient per layer</h5>
              <div id="q43-bars" class="text-xs text-gray-700 space-y-1" aria-live="polite"></div>
          </div>
          <div class="bg-white border rounded-lg p-4">
            <h5 class="font-semibold text-gray-800 mb-2">ðŸ“Š Metrics</h5>
            <div id="q43-metrics" class="text-xs text-gray-700 space-y-2" aria-live="polite"></div>
            <div id="q43-guidance" class="mt-1 text-xs text-gray-700" aria-live="polite"></div>
          </div>
          <div class="bg-white border rounded-lg p-4">
            <h5 class="font-semibold text-gray-800 mb-2">ðŸ§  Explanation</h5>
            <div id="q43-explain" class="text-xs text-gray-700" aria-live="polite"></div>
          </div>
        </div>
      </div>
    
