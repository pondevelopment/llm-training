<div class="space-y-6">
  <div class="question-card q43-config space-y-4">
    <div class="q43-presets-row flex items-center gap-2">
      <span class="small-caption text-muted">Presets:</span>
      <div class="q43-presets-list flex items-center gap-2" role="list">
        <button type="button" data-q43-preset="stable-mid" class="btn-soft text-xs q43-preset" role="listitem" title="L=12, g=0.92, Î±=0.5, Pre-LN, shortcut off">Stable mid</button>
        <button type="button" data-q43-preset="deep" class="btn-soft text-xs q43-preset" role="listitem" title="L=36, g=0.95, Î±=0.6, Pre-LN, shortcut hop=4">Deep stack</button>
        <button type="button" data-q43-preset="risk" class="btn-soft text-xs q43-preset" role="listitem" title="L=24, g=1.12, Î±=0.8, Post-LN, shortcut off">Risky edge</button>
      </div>
    </div>
    <p class="small-caption text-muted">Hover a preset to preview its depth, gain, residual weight, normalisation mode, and attention shortcut.</p>

    <div class="grid md:grid-cols-5 gap-4 text-xs">
      <label class="q43-control">
        <span class="font-semibold text-heading">Depth L</span>
        <input id="q43-depth" type="range" min="4" max="48" step="1" value="12" class="q43-slider" />
        <span class="q43-value" id="q43-depth-val">12</span>
      </label>
      <label class="q43-control">
        <span class="font-semibold text-heading">Base gain g</span>
        <input id="q43-gain" type="range" min="0.70" max="1.20" step="0.01" value="0.92" class="q43-slider" />
        <span class="q43-value" id="q43-gain-val">0.92</span>
      </label>
      <label class="q43-control">
        <span class="font-semibold text-heading">Residual weight Î±</span>
        <input id="q43-res" type="range" min="0.00" max="1.00" step="0.05" value="0.5" class="q43-slider" />
        <span class="q43-value" id="q43-res-val">0.50</span>
      </label>
      <label class="q43-control">
        <span class="font-semibold text-heading">Normalization</span>
        <input id="q43-norm" type="hidden" value="pre" />
        <div id="q43-norm-toggle" class="view-toggle flex flex-wrap gap-1 text-xs" role="radiogroup" aria-label="Normalization mode">
          <button type="button" data-q43-norm="none" class="toggle-inactive" aria-pressed="false">None</button>
          <button type="button" data-q43-norm="post" class="toggle-inactive" aria-pressed="false">Post-LN</button>
          <button type="button" data-q43-norm="pre" class="toggle-active" aria-pressed="true">Pre-LN</button>
        </div>
      </label>
      <label class="q43-control">
        <span class="font-semibold text-heading">Attention shortcut</span>
        <input id="q43-shortcut" type="hidden" value="0" />
        <div id="q43-shortcut-toggle" class="view-toggle flex flex-wrap gap-1 text-xs" role="radiogroup" aria-label="Attention shortcut hop">
          <button type="button" data-q43-shortcut="0" class="toggle-active" aria-pressed="true">Off</button>
          <button type="button" data-q43-shortcut="4" class="toggle-inactive" aria-pressed="false">Hop 4</button>
          <button type="button" data-q43-shortcut="2" class="toggle-inactive" aria-pressed="false">Hop 2</button>
        </div>
      </label>
    </div>

    <div class="small-caption text-muted">
      We simulate gradient magnitude from top (layer L) to bottom (layer 1). Residual adds an identity path; pre-norm pulls gains toward 1. Attention shortcut reduces effective hops for part of the gradient.
    </div>
    <div class="small-caption text-muted">
      Legend: <span class="q43-legend-chip q43-legend-chip--baseline">baseline</span> vs <span class="q43-legend-chip q43-legend-chip--improved">transformer stabilized</span>.
    </div>
  </div>

  <div class="question-card q43-card space-y-4">
    <div class="md:flex md:items-start md:gap-6">
      <div class="md:w-1/3 md:sticky md:top-4 space-y-2">
        <h5 class="font-semibold text-heading">ðŸ“ˆ Gradient per layer</h5>
        <svg id="q43-chart" class="w-full" height="110" role="img" aria-label="Gradient magnitude sparkline"></svg>
        <p id="q43-layer-detail" class="small-caption text-muted"></p>
      </div>
      <div class="md:w-2/3 mt-4 md:mt-0">
        <div id="q43-bars" class="q43-bars grid gap-3 sm:grid-cols-2" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <div class="md:grid md:grid-cols-2 gap-4">
    <div class="question-card q43-card space-y-3">
      <h5 class="font-semibold text-heading">ðŸ“Š Metrics</h5>
      <div id="q43-metrics" aria-live="polite"></div>
      <div id="q43-guidance" class="small-caption text-muted" aria-live="polite"></div>
    </div>
    <div class="question-card q43-card space-y-3">
      <h5 class="font-semibold text-heading">ðŸ§  Explanation</h5>
      <div id="q43-explain" class="q43-explain" aria-live="polite"></div>
    </div>
  </div>
</div>
